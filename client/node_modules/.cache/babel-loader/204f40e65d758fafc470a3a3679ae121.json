{"ast":null,"code":"import _asyncToGenerator from\"/Users/stephan/Dropbox/Entwicklung/webdev/projektstudium/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/stephan/Dropbox/Entwicklung/webdev/projektstudium/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/stephan/Dropbox/Entwicklung/webdev/projektstudium/client/node_modules/@babel/runtime/regenerator/index.js\";import{React,useState,useEffect}from\"react\";import{MDBCard,MDBCardBody,MDBCardTitle,MDBCardText,MDBCardFooter,MDBBtn,MDBRow,MDBCol,MDBIcon}from\"mdb-react-ui-kit\";import useAxiosPrivate from\"../../hooks/useAxiosPrivate\";import CardModal from\"./CardModal\";//Hook für Contextabruf\nimport useAuth from\"../../hooks/useAuth\";import{Link}from\"react-router-dom\";import{getDokumentenHash}from\"../../Web3Client\";import Backdrop from\"@mui/material/Backdrop\";import CircularProgress from\"@mui/material/CircularProgress\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function DocumentCard(props){var axiosInstance=useAxiosPrivate();//Context mit Nutzerdaten abrufen\nvar _useAuth=useAuth(),auth=_useAuth.auth;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),datei=_useState2[0],setDatei=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),fileLink=_useState4[0],setFileLink=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),ShowConfirmation=_useState6[0],setShowConfirmation=_useState6[1];var _useState7=useState(true),_useState8=_slicedToArray(_useState7,2),isLoading=_useState8[0],setIsLoading=_useState8[1];var _useState9=useState(\"ausstehend\"),_useState10=_slicedToArray(_useState9,2),isVerified=_useState10[0],setIsVerified=_useState10[1];var author_company=props.author_company;useEffect(function(){//Abruf des Link zur Datei\nif(props.file!=null)axiosInstance.get(\"file/\"+props.file).then(function(res){setDatei(res.data);setFileLink(res.data.file);},[]);},[ShowConfirmation]);function getFileFromUrl(_x){return _getFileFromUrl.apply(this,arguments);}function _getFileFromUrl(){_getFileFromUrl=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(url){var defaultType,response,data,name,_args=arguments;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:defaultType=_args.length>1&&_args[1]!==undefined?_args[1]:\"image/jpeg\";_context.next=3;return fetch(url);case 3:response=_context.sent;_context.next=6;return response.blob();case 6:data=_context.sent;name=name;return _context.abrupt(\"return\",new File([data],name,{type:data.type||defaultType}));case 9:case\"end\":return _context.stop();}}},_callee);}));return _getFileFromUrl.apply(this,arguments);}function verifyDocument(_x2){return _verifyDocument.apply(this,arguments);}function _verifyDocument(){_verifyDocument=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(id){var file;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:// Backdrop Ladeanimation öffnen\nhandleToggleBackdrop();_context2.next=3;return getFileFromUrl(fileLink);case 3:file=_context2.sent;proofFilehash(id,file,function(hashwert){getDokumentenHash(props.blockchain_did)//Blockchain Transaktion\n.then(function(tx){if(hashwert==tx){setIsVerified(\"Hash korrekt\");// Backdrop Ladeanimation schließen\nhandleCloseBackdrop();return true;}else{setIsVerified(\"Hash inkorrekt\");// Backdrop Ladeanimation schließen\nhandleCloseBackdrop();return false;}}).catch(function(err){console.log(\"Fehlgeschlagen. Fehlermeldung: \"+err);// Backdrop Ladeanimation schließen\nhandleCloseBackdrop();});});case 5:case\"end\":return _context2.stop();}}},_callee2);}));return _verifyDocument.apply(this,arguments);}function proofFilehash(_x3,_x4,_x5){return _proofFilehash.apply(this,arguments);}// State für \"Dokument anzeigen\" Modal\nfunction _proofFilehash(){_proofFilehash=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(_DokumentID,_file,callback){var crypto,hashwert,fileReader;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0://Download der Datei\ncrypto=require(\"crypto\");hashwert=\"\";fileReader=new FileReader();fileReader.readAsText(_file);fileReader.onload=function(e){hashwert=crypto.createHash(\"sha512\").update(e.target.result).digest(\"hex\");callback(hashwert);};case 5:case\"end\":return _context3.stop();}}},_callee3);}));return _proofFilehash.apply(this,arguments);}var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),showDocumentModal=_useState12[0],setShowDocumentModal=_useState12[1];// Funktion für Manipulation von Modal (als props weitergereicht)\nfunction toggleShowDocumentModal(){setShowDocumentModal(!showDocumentModal);}// -- Loading Backdrop --\nvar _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),openBackdrop=_useState14[0],setOpenBackdrop=_useState14[1];var handleCloseBackdrop=function handleCloseBackdrop(){setOpenBackdrop(false);};var handleToggleBackdrop=function handleToggleBackdrop(){setOpenBackdrop(!openBackdrop);};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(MDBCard,{className:\"h-100\",style:{minHeight:\"250px\",width:\"510px\"},children:[/*#__PURE__*/_jsx(MDBCardBody,{children:/*#__PURE__*/_jsxs(MDBRow,{children:[/*#__PURE__*/_jsx(MDBCol,{sm:\"2\",className:\"d-flex justify-content-center\",children:props.type==\"Rechnung\"?/*#__PURE__*/_jsx(MDBIcon,{className:\"mt-2\",fas:true,size:\"4x\",icon:\"file-invoice-dollar\"}):/*#__PURE__*/_jsx(MDBIcon,{className:\"mt-2\",fas:true,size:\"4x\",icon:\"file-alt\"})}),/*#__PURE__*/_jsxs(MDBCol,{sm:\"8\",children:[/*#__PURE__*/_jsx(MDBCardTitle,{children:props.type+\" \"+\"(\"+props.documentDate+\")\"}),/*#__PURE__*/_jsxs(MDBCardText,{className:\"mt-2 me-5\",children:[/*#__PURE__*/_jsx(\"b\",{children:\"Beschreibung: \"}),/*#__PURE__*/_jsx(\"br\",{}),props.description==\"\"?/*#__PURE__*/_jsx(\"i\",{children:\"Es liegt keine Beschreibung vor.\"}):props.description,/*#__PURE__*/_jsx(\"br\",{}),props!==null&&props!==void 0&&props.isZoll&&props.type!==\"Rechnung\"||props.type==\"Zollbescheid\"?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Verifikation: \"}),isVerified]}):null]})]}),/*#__PURE__*/_jsxs(MDBCol,{sm:\"2\",children:[/*#__PURE__*/_jsx(Link,{style:{display:\"block\",margin:\"1rem 0\"},to:\"document/\"+props.id.toString(),params:{title:\"Hello\"},children:/*#__PURE__*/_jsx(MDBBtn,{className:\"float-end\",outline:true,onClick:toggleShowDocumentModal,children:\"Anzeigen\"})},props.id),props!==null&&props!==void 0&&props.isZoll&&props.type!==\"Rechnung\"||props.type==\"Zollbescheid\"?/*#__PURE__*/_jsx(MDBBtn,{className:\"float-end mt-3\",outline:true,onClick:verifyDocument,children:\"Verifizieren\"}):null]})]})}),/*#__PURE__*/_jsxs(MDBCardFooter,{className:\"text-muted\",children:[\"Hochgeladen am: \",props.uploadDate,/*#__PURE__*/_jsx(\"br\",{}),\"von \",props.author_company,\" (\",props.author,\")\"]})]}),/*#__PURE__*/_jsx(CardModal,{basicModal:showDocumentModal,setBasicModal:setShowDocumentModal,toggleShow:toggleShowDocumentModal,title:props.title,description:props.description}),/*#__PURE__*/_jsx(Backdrop,{sx:{color:\"#fff\",zIndex:function zIndex(theme){return theme.zIndex.drawer+1;}},open:openBackdrop,onClick:handleCloseBackdrop,children:/*#__PURE__*/_jsx(CircularProgress,{color:\"inherit\"})})]});}export default DocumentCard;","map":{"version":3,"sources":["/Users/stephan/Dropbox/Entwicklung/webdev/projektstudium/client/src/components/Documents/DocumentCard.jsx"],"names":["React","useState","useEffect","MDBCard","MDBCardBody","MDBCardTitle","MDBCardText","MDBCardFooter","MDBBtn","MDBRow","MDBCol","MDBIcon","useAxiosPrivate","CardModal","useAuth","Link","getDokumentenHash","Backdrop","CircularProgress","DocumentCard","props","axiosInstance","auth","datei","setDatei","fileLink","setFileLink","ShowConfirmation","setShowConfirmation","isLoading","setIsLoading","isVerified","setIsVerified","author_company","file","get","then","res","data","getFileFromUrl","url","defaultType","fetch","response","blob","name","File","type","verifyDocument","id","handleToggleBackdrop","proofFilehash","hashwert","blockchain_did","tx","handleCloseBackdrop","catch","err","console","log","_DokumentID","_file","callback","crypto","require","fileReader","FileReader","readAsText","onload","e","createHash","update","target","result","digest","showDocumentModal","setShowDocumentModal","toggleShowDocumentModal","openBackdrop","setOpenBackdrop","minHeight","width","documentDate","description","isZoll","display","margin","toString","title","uploadDate","author","color","zIndex","theme","drawer"],"mappings":"kcAAA,OAASA,KAAT,CAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,OACEC,OADF,CAEEC,WAFF,CAGEC,YAHF,CAIEC,WAJF,CAKEC,aALF,CAMEC,MANF,CAOEC,MAPF,CAQEC,MARF,CASEC,OATF,KAUO,kBAVP,CAWA,MAAOC,CAAAA,eAAP,KAA4B,6BAA5B,CACA,MAAOC,CAAAA,SAAP,KAAsB,aAAtB,CACA;AACA,MAAOC,CAAAA,OAAP,KAAoB,qBAApB,CACA,OAASC,IAAT,KAAqB,kBAArB,CACA,OAASC,iBAAT,KAAkC,kBAAlC,CACA,MAAOC,CAAAA,QAAP,KAAqB,wBAArB,CACA,MAAOC,CAAAA,gBAAP,KAA6B,gCAA7B,C,6IAEA,QAASC,CAAAA,YAAT,CAAsBC,KAAtB,CAA6B,CAC3B,GAAMC,CAAAA,aAAa,CAAGT,eAAe,EAArC,CACA;AACA,aAAiBE,OAAO,EAAxB,CAAQQ,IAAR,UAAQA,IAAR,CACA,cAA0BrB,QAAQ,CAAC,EAAD,CAAlC,wCAAOsB,KAAP,eAAcC,QAAd,eACA,eAAgCvB,QAAQ,CAAC,EAAD,CAAxC,yCAAOwB,QAAP,eAAiBC,WAAjB,eACA,eAAgDzB,QAAQ,CAAC,KAAD,CAAxD,yCAAO0B,gBAAP,eAAyBC,mBAAzB,eACA,eAAkC3B,QAAQ,CAAC,IAAD,CAA1C,yCAAO4B,SAAP,eAAkBC,YAAlB,eAEA,eAAoC7B,QAAQ,CAAC,YAAD,CAA5C,0CAAO8B,UAAP,gBAAmBC,aAAnB,gBAEA,GAAMC,CAAAA,cAAc,CAAGb,KAAK,CAACa,cAA7B,CAEA/B,SAAS,CAAC,UAAM,CACd;AAEA,GAAIkB,KAAK,CAACc,IAAN,EAAc,IAAlB,CACEb,aAAa,CAACc,GAAd,CAAkB,QAAUf,KAAK,CAACc,IAAlC,EAAwCE,IAAxC,CAA6C,SAACC,GAAD,CAAS,CACpDb,QAAQ,CAACa,GAAG,CAACC,IAAL,CAAR,CACAZ,WAAW,CAACW,GAAG,CAACC,IAAJ,CAASJ,IAAV,CAAX,CACD,CAHD,CAGG,EAHH,EAIH,CARQ,CAQN,CAACP,gBAAD,CARM,CAAT,CAb2B,QAuBZY,CAAAA,cAvBY,sJAuB3B,iBAA8BC,GAA9B,qKAAmCC,WAAnC,+CAAiD,YAAjD,uBACyBC,CAAAA,KAAK,CAACF,GAAD,CAD9B,QACQG,QADR,qCAEqBA,CAAAA,QAAQ,CAACC,IAAT,EAFrB,QAEQN,IAFR,eAGMO,IAHN,CAGaA,IAHb,iCAIS,GAAIC,CAAAA,IAAJ,CAAS,CAACR,IAAD,CAAT,CAAiBO,IAAjB,CAAuB,CAC5BE,IAAI,CAAET,IAAI,CAACS,IAAL,EAAaN,WADS,CAAvB,CAJT,wDAvB2B,yDAgCZO,CAAAA,cAhCY,uJAgC3B,kBAA8BC,EAA9B,+HACE;AACAC,oBAAoB,GAFtB,uBAGqBX,CAAAA,cAAc,CAACd,QAAD,CAHnC,QAGQS,IAHR,gBAIEiB,aAAa,CAACF,EAAD,CAAKf,IAAL,CAAW,SAAUkB,QAAV,CAAoB,CAC1CpC,iBAAiB,CAACI,KAAK,CAACiC,cAAP,CAAuB;AAAxC,CACGjB,IADH,CACQ,SAACkB,EAAD,CAAQ,CACZ,GAAIF,QAAQ,EAAIE,EAAhB,CAAoB,CAClBtB,aAAa,CAAC,cAAD,CAAb,CAEA;AACAuB,mBAAmB,GACnB,MAAO,KAAP,CACD,CAND,IAMO,CACLvB,aAAa,CAAC,gBAAD,CAAb,CAEA;AACAuB,mBAAmB,GACnB,MAAO,MAAP,CACD,CACF,CAfH,EAgBGC,KAhBH,CAgBS,SAACC,GAAD,CAAS,CACdC,OAAO,CAACC,GAAR,CAAY,kCAAoCF,GAAhD,EAEA;AACAF,mBAAmB,GACpB,CArBH,EAsBD,CAvBY,CAAb,CAJF,wDAhC2B,yDA8DZJ,CAAAA,aA9DY,2DA6E3B;AA7E2B,iGA8D3B,kBAA6BS,WAA7B,CAA0CC,KAA1C,CAAiDC,QAAjD,qJACE;AACIC,MAFN,CAEeC,OAAO,CAAC,QAAD,CAFtB,CAGMZ,QAHN,CAGiB,EAHjB,CAIQa,UAJR,CAIqB,GAAIC,CAAAA,UAAJ,EAJrB,CAKED,UAAU,CAACE,UAAX,CAAsBN,KAAtB,EACAI,UAAU,CAACG,MAAX,CAAoB,SAAUC,CAAV,CAAa,CAC/BjB,QAAQ,CAAGW,MAAM,CACdO,UADQ,CACG,QADH,EAERC,MAFQ,CAEDF,CAAC,CAACG,MAAF,CAASC,MAFR,EAGRC,MAHQ,CAGD,KAHC,CAAX,CAIAZ,QAAQ,CAACV,QAAD,CAAR,CACD,CAND,CANF,wDA9D2B,gDA8E3B,gBAAkDnD,QAAQ,CAAC,KAAD,CAA1D,2CAAO0E,iBAAP,gBAA0BC,oBAA1B,gBACA;AACA,QAASC,CAAAA,uBAAT,EAAmC,CACjCD,oBAAoB,CAAC,CAACD,iBAAF,CAApB,CACD,CAED;AACA,gBAAwC1E,QAAQ,CAAC,KAAD,CAAhD,2CAAO6E,YAAP,gBAAqBC,eAArB,gBACA,GAAMxB,CAAAA,mBAAmB,CAAG,QAAtBA,CAAAA,mBAAsB,EAAM,CAChCwB,eAAe,CAAC,KAAD,CAAf,CACD,CAFD,CAGA,GAAM7B,CAAAA,oBAAoB,CAAG,QAAvBA,CAAAA,oBAAuB,EAAM,CACjC6B,eAAe,CAAC,CAACD,YAAF,CAAf,CACD,CAFD,CAIA,mBACE,wCACE,MAAC,OAAD,EAAS,SAAS,CAAC,OAAnB,CAA2B,KAAK,CAAE,CAAEE,SAAS,CAAE,OAAb,CAAsBC,KAAK,CAAE,OAA7B,CAAlC,wBACE,KAAC,WAAD,wBACE,MAAC,MAAD,yBACE,KAAC,MAAD,EAAQ,EAAE,CAAC,GAAX,CAAe,SAAS,CAAC,+BAAzB,UACG7D,KAAK,CAAC2B,IAAN,EAAc,UAAd,cACC,KAAC,OAAD,EACE,SAAS,CAAC,MADZ,CAEE,GAAG,KAFL,CAGE,IAAI,CAAC,IAHP,CAIE,IAAI,CAAC,qBAJP,EADD,cAQC,KAAC,OAAD,EAAS,SAAS,CAAC,MAAnB,CAA0B,GAAG,KAA7B,CAA8B,IAAI,CAAC,IAAnC,CAAwC,IAAI,CAAC,UAA7C,EATJ,EADF,cAaE,MAAC,MAAD,EAAQ,EAAE,CAAC,GAAX,wBACE,KAAC,YAAD,WACG3B,KAAK,CAAC2B,IAAN,CAAa,GAAb,CAAmB,GAAnB,CAAyB3B,KAAK,CAAC8D,YAA/B,CAA8C,GADjD,EADF,cAKE,MAAC,WAAD,EAAa,SAAS,CAAC,WAAvB,wBACE,qCADF,cAEE,aAFF,CAGG9D,KAAK,CAAC+D,WAAN,EAAqB,EAArB,cACC,uDADD,CAGC/D,KAAK,CAAC+D,WANV,cAQE,aARF,CASI/D,KAAK,OAAL,EAAAA,KAAK,SAAL,EAAAA,KAAK,CAAEgE,MAAP,EAAiBhE,KAAK,CAAC2B,IAAN,GAAe,UAAjC,EACD3B,KAAK,CAAC2B,IAAN,EAAc,cADb,cAEC,wCACE,qCADF,CAEGhB,UAFH,GAFD,CAMG,IAfN,GALF,GAbF,cAoCE,MAAC,MAAD,EAAQ,EAAE,CAAC,GAAX,wBACE,KAAC,IAAD,EACE,KAAK,CAAE,CAAEsD,OAAO,CAAE,OAAX,CAAoBC,MAAM,CAAE,QAA5B,CADT,CAEE,EAAE,CAAE,YAAclE,KAAK,CAAC6B,EAAN,CAASsC,QAAT,EAFpB,CAIE,MAAM,CAAE,CAAEC,KAAK,CAAE,OAAT,CAJV,uBAME,KAAC,MAAD,EACE,SAAS,CAAC,WADZ,CAEE,OAAO,KAFT,CAGE,OAAO,CAAEX,uBAHX,sBANF,EAGOzD,KAAK,CAAC6B,EAHb,CADF,CAeI7B,KAAK,OAAL,EAAAA,KAAK,SAAL,EAAAA,KAAK,CAAEgE,MAAP,EAAiBhE,KAAK,CAAC2B,IAAN,GAAe,UAAjC,EACD3B,KAAK,CAAC2B,IAAN,EAAc,cADb,cAEC,KAAC,MAAD,EACE,SAAS,CAAC,gBADZ,CAEE,OAAO,KAFT,CAGE,OAAO,CAAEC,cAHX,0BAFD,CASG,IAxBN,GApCF,GADF,EADF,cAkEE,MAAC,aAAD,EAAe,SAAS,CAAC,YAAzB,8BACmB5B,KAAK,CAACqE,UADzB,cAEE,aAFF,QAGOrE,KAAK,CAACa,cAHb,MAG+Bb,KAAK,CAACsE,MAHrC,OAlEF,GADF,cAyEE,KAAC,SAAD,EACE,UAAU,CAAEf,iBADd,CAEE,aAAa,CAAEC,oBAFjB,CAGE,UAAU,CAAEC,uBAHd,CAIE,KAAK,CAAEzD,KAAK,CAACoE,KAJf,CAKE,WAAW,CAAEpE,KAAK,CAAC+D,WALrB,EAzEF,cAgFE,KAAC,QAAD,EACE,EAAE,CAAE,CAAEQ,KAAK,CAAE,MAAT,CAAiBC,MAAM,CAAE,gBAACC,KAAD,QAAWA,CAAAA,KAAK,CAACD,MAAN,CAAaE,MAAb,CAAsB,CAAjC,EAAzB,CADN,CAEE,IAAI,CAAEhB,YAFR,CAGE,OAAO,CAAEvB,mBAHX,uBAKE,KAAC,gBAAD,EAAkB,KAAK,CAAC,SAAxB,EALF,EAhFF,GADF,CA0FD,CAED,cAAepC,CAAAA,YAAf","sourcesContent":["import { React, useState, useEffect } from \"react\";\nimport {\n  MDBCard,\n  MDBCardBody,\n  MDBCardTitle,\n  MDBCardText,\n  MDBCardFooter,\n  MDBBtn,\n  MDBRow,\n  MDBCol,\n  MDBIcon,\n} from \"mdb-react-ui-kit\";\nimport useAxiosPrivate from \"../../hooks/useAxiosPrivate\";\nimport CardModal from \"./CardModal\";\n//Hook für Contextabruf\nimport useAuth from \"../../hooks/useAuth\";\nimport { Link } from \"react-router-dom\";\nimport { getDokumentenHash } from \"../../Web3Client\";\nimport Backdrop from \"@mui/material/Backdrop\";\nimport CircularProgress from \"@mui/material/CircularProgress\";\n\nfunction DocumentCard(props) {\n  const axiosInstance = useAxiosPrivate();\n  //Context mit Nutzerdaten abrufen\n  const { auth } = useAuth();\n  const [datei, setDatei] = useState([]);\n  const [fileLink, setFileLink] = useState(\"\");\n  const [ShowConfirmation, setShowConfirmation] = useState(false);\n  const [isLoading, setIsLoading] = useState(true);\n\n  const [isVerified, setIsVerified] = useState(\"ausstehend\");\n\n  const author_company = props.author_company;\n\n  useEffect(() => {\n    //Abruf des Link zur Datei\n\n    if (props.file != null)\n      axiosInstance.get(\"file/\" + props.file).then((res) => {\n        setDatei(res.data);\n        setFileLink(res.data.file);\n      }, []);\n  }, [ShowConfirmation]);\n\n  async function getFileFromUrl(url, defaultType = \"image/jpeg\") {\n    const response = await fetch(url);\n    const data = await response.blob();\n    var name = name;\n    return new File([data], name, {\n      type: data.type || defaultType,\n    });\n  }\n\n  async function verifyDocument(id) {\n    // Backdrop Ladeanimation öffnen\n    handleToggleBackdrop();\n    const file = await getFileFromUrl(fileLink);\n    proofFilehash(id, file, function (hashwert) {\n      getDokumentenHash(props.blockchain_did) //Blockchain Transaktion\n        .then((tx) => {\n          if (hashwert == tx) {\n            setIsVerified(\"Hash korrekt\");\n\n            // Backdrop Ladeanimation schließen\n            handleCloseBackdrop();\n            return true;\n          } else {\n            setIsVerified(\"Hash inkorrekt\");\n\n            // Backdrop Ladeanimation schließen\n            handleCloseBackdrop();\n            return false;\n          }\n        })\n        .catch((err) => {\n          console.log(\"Fehlgeschlagen. Fehlermeldung: \" + err);\n\n          // Backdrop Ladeanimation schließen\n          handleCloseBackdrop();\n        });\n    });\n  }\n\n  async function proofFilehash(_DokumentID, _file, callback) {\n    //Download der Datei\n    var crypto = require(\"crypto\");\n    var hashwert = \"\";\n    const fileReader = new FileReader();\n    fileReader.readAsText(_file);\n    fileReader.onload = function (e) {\n      hashwert = crypto\n        .createHash(\"sha512\")\n        .update(e.target.result)\n        .digest(\"hex\");\n      callback(hashwert);\n    };\n  }\n\n  // State für \"Dokument anzeigen\" Modal\n  const [showDocumentModal, setShowDocumentModal] = useState(false);\n  // Funktion für Manipulation von Modal (als props weitergereicht)\n  function toggleShowDocumentModal() {\n    setShowDocumentModal(!showDocumentModal);\n  }\n\n  // -- Loading Backdrop --\n  const [openBackdrop, setOpenBackdrop] = useState(false);\n  const handleCloseBackdrop = () => {\n    setOpenBackdrop(false);\n  };\n  const handleToggleBackdrop = () => {\n    setOpenBackdrop(!openBackdrop);\n  };\n\n  return (\n    <>\n      <MDBCard className=\"h-100\" style={{ minHeight: \"250px\", width: \"510px\" }}>\n        <MDBCardBody>\n          <MDBRow>\n            <MDBCol sm=\"2\" className=\"d-flex justify-content-center\">\n              {props.type == \"Rechnung\" ? (\n                <MDBIcon\n                  className=\"mt-2\"\n                  fas\n                  size=\"4x\"\n                  icon=\"file-invoice-dollar\"\n                />\n              ) : (\n                <MDBIcon className=\"mt-2\" fas size=\"4x\" icon=\"file-alt\" />\n              )}\n            </MDBCol>\n            <MDBCol sm=\"8\">\n              <MDBCardTitle>\n                {props.type + \" \" + \"(\" + props.documentDate + \")\"}\n              </MDBCardTitle>\n\n              <MDBCardText className=\"mt-2 me-5\">\n                <b>Beschreibung: </b>\n                <br />\n                {props.description == \"\" ? (\n                  <i>Es liegt keine Beschreibung vor.</i>\n                ) : (\n                  props.description\n                )}\n                <br />\n                {(props?.isZoll && props.type !== \"Rechnung\") ||\n                props.type == \"Zollbescheid\" ? (\n                  <>\n                    <b>Verifikation: </b>\n                    {isVerified}\n                  </>\n                ) : null}\n              </MDBCardText>\n            </MDBCol>\n            <MDBCol sm=\"2\">\n              <Link\n                style={{ display: \"block\", margin: \"1rem 0\" }}\n                to={\"document/\" + props.id.toString()}\n                key={props.id}\n                params={{ title: \"Hello\" }}\n              >\n                <MDBBtn\n                  className=\"float-end\"\n                  outline\n                  onClick={toggleShowDocumentModal}\n                >\n                  Anzeigen\n                </MDBBtn>\n              </Link>\n              {(props?.isZoll && props.type !== \"Rechnung\") ||\n              props.type == \"Zollbescheid\" ? (\n                <MDBBtn\n                  className=\"float-end mt-3\"\n                  outline\n                  onClick={verifyDocument}\n                >\n                  Verifizieren\n                </MDBBtn>\n              ) : null}\n            </MDBCol>\n          </MDBRow>\n        </MDBCardBody>\n        <MDBCardFooter className=\"text-muted\">\n          Hochgeladen am: {props.uploadDate}\n          <br />\n          von {props.author_company} ({props.author})\n        </MDBCardFooter>\n      </MDBCard>\n      <CardModal\n        basicModal={showDocumentModal}\n        setBasicModal={setShowDocumentModal}\n        toggleShow={toggleShowDocumentModal}\n        title={props.title}\n        description={props.description}\n      />\n      <Backdrop\n        sx={{ color: \"#fff\", zIndex: (theme) => theme.zIndex.drawer + 1 }}\n        open={openBackdrop}\n        onClick={handleCloseBackdrop}\n      >\n        <CircularProgress color=\"inherit\" />\n      </Backdrop>\n    </>\n  );\n}\n\nexport default DocumentCard;\n"]},"metadata":{},"sourceType":"module"}