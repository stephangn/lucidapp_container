{"ast":null,"code":"var _jsxFileName = \"/Users/stephan/Dropbox/Entwicklung/webdev/projektstudium/client/src/components/requireAuth.js\",\n    _s = $RefreshSig$();\n\nimport { useLocation, Navigate, Outlet } from \"react-router-dom\";\nimport useAuth from \"../hooks/useAuth\";\nimport useDataUpdate from \"../hooks/useDataUpdate\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst RequireAuth = async _ref => {\n  _s();\n\n  let {\n    allowedRoles\n  } = _ref;\n  const {\n    auth\n  } = useAuth();\n  const location = useLocation();\n  const dataUpdate = useDataUpdate();\n\n  if (auth.accessToken && !auth.role) {\n    console.log(\"hier liegt das Problem\");\n    await dataUpdate();\n    console.log(\"Aber neue Daten kommen\");\n  }\n  /*     console.log(auth?.user);\n      console.log(`Die aktuelle Rolle ist ${auth?.role}`)\n      console.log(allowedRoles) */\n\n\n  return (//wenn AccessToken vorhanden Seite anzeigen, ansonsten login\n    allowedRoles !== null && allowedRoles !== void 0 && allowedRoles.includes(auth === null || auth === void 0 ? void 0 : auth.role) ? /*#__PURE__*/_jsxDEV(Outlet, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 26,\n      columnNumber: 15\n    }, this) : auth !== null && auth !== void 0 && auth.username ? /*#__PURE__*/_jsxDEV(Navigate, {\n      to: \"/unauthorized\",\n      state: {\n        from: location\n      },\n      replace: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 28,\n      columnNumber: 19\n    }, this) : /*#__PURE__*/_jsxDEV(Navigate, {\n      to: \"/login\",\n      state: {\n        from: location\n      },\n      replace: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 29,\n      columnNumber: 19\n    }, this)\n  );\n};\n\n_s(RequireAuth, \"TaLkX6OzzjQXetAQeapZUHT1OrY=\", false, function () {\n  return [useAuth, useLocation, useDataUpdate];\n});\n\n_c = RequireAuth;\nexport default RequireAuth;\n\nvar _c;\n\n$RefreshReg$(_c, \"RequireAuth\");","map":{"version":3,"sources":["/Users/stephan/Dropbox/Entwicklung/webdev/projektstudium/client/src/components/requireAuth.js"],"names":["useLocation","Navigate","Outlet","useAuth","useDataUpdate","RequireAuth","allowedRoles","auth","location","dataUpdate","accessToken","role","console","log","includes","username","from"],"mappings":";;;AAAA,SAAUA,WAAV,EAAuBC,QAAvB,EAAgCC,MAAhC,QAA6C,kBAA7C;AAEA,OAAOC,OAAP,MAAoB,kBAApB;AACA,OAAOC,aAAP,MAA0B,wBAA1B;;;AAIA,MAAMC,WAAW,GAAI,cAA0B;AAAA;;AAAA,MAAnB;AAACC,IAAAA;AAAD,GAAmB;AAC3C,QAAM;AAACC,IAAAA;AAAD,MAASJ,OAAO,EAAtB;AACA,QAAMK,QAAQ,GAAGR,WAAW,EAA5B;AACA,QAAMS,UAAU,GAAGL,aAAa,EAAhC;;AAEA,MAAIG,IAAI,CAACG,WAAL,IAAoB,CAACH,IAAI,CAACI,IAA9B,EAAoC;AAChCC,IAAAA,OAAO,CAACC,GAAR,CAAY,wBAAZ;AACA,UAAMJ,UAAU,EAAhB;AACAG,IAAAA,OAAO,CAACC,GAAR,CAAY,wBAAZ;AACH;AAEL;AACA;AACA;;;AAEI,SACI;AACDP,IAAAA,YAAY,SAAZ,IAAAA,YAAY,WAAZ,IAAAA,YAAY,CAAEQ,QAAd,CAAwBP,IAAxB,aAAwBA,IAAxB,uBAAwBA,IAAI,CAAEI,IAA9B,iBACO,QAAC,MAAD;AAAA;AAAA;AAAA;AAAA,YADP,GAEOJ,IAAI,SAAJ,IAAAA,IAAI,WAAJ,IAAAA,IAAI,CAAEQ,QAAN,gBACI,QAAC,QAAD;AAAU,MAAA,EAAE,EAAC,eAAb;AAA6B,MAAA,KAAK,EAAE;AAACC,QAAAA,IAAI,EAACR;AAAN,OAApC;AAAqD,MAAA,OAAO;AAA5D;AAAA;AAAA;AAAA;AAAA,YADJ,gBAEI,QAAC,QAAD;AAAU,MAAA,EAAE,EAAG,QAAf;AAAwB,MAAA,KAAK,EAAE;AAACQ,QAAAA,IAAI,EAACR;AAAN,OAA/B;AAAgD,MAAA,OAAO;AAAvD;AAAA;AAAA;AAAA;AAAA;AANd;AAUH,CAzBD;;GAAMH,W;UACaF,O,EACEH,W,EACEI,a;;;KAHjBC,W;AA2BN,eAAeA,WAAf","sourcesContent":["import  { useLocation, Navigate,Outlet} from \"react-router-dom\";\n\nimport useAuth from \"../hooks/useAuth\";\nimport useDataUpdate from \"../hooks/useDataUpdate\";\n\n\n\nconst RequireAuth =  async ({allowedRoles}) => {\n    const {auth} = useAuth();\n    const location = useLocation();\n    const dataUpdate = useDataUpdate(); \n    \n    if (auth.accessToken && !auth.role)Â {\n        console.log(\"hier liegt das Problem\")\n        await dataUpdate();\n        console.log(\"Aber neue Daten kommen\")\n    }\n\n/*     console.log(auth?.user);\n    console.log(`Die aktuelle Rolle ist ${auth?.role}`)\n    console.log(allowedRoles) */\n    \n    return (\n        //wenn AccessToken vorhanden Seite anzeigen, ansonsten login\n       allowedRoles?.includes( auth?.role)\n            ? <Outlet/> \n            : auth?.username \n                ? <Navigate to=\"/unauthorized\" state={{from:location}} replace />\n                : <Navigate to = \"/login\" state={{from:location}} replace />\n\n    )\n\n}\n\nexport default RequireAuth;"]},"metadata":{},"sourceType":"module"}