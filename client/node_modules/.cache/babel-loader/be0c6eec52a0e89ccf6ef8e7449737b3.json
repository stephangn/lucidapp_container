{"ast":null,"code":"import _slicedToArray from\"/Users/stephan/Dropbox/Entwicklung/webdev/projektstudium/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import{MDBContainer,MDBInput,MDBBtn,MDBRow,MDBCol}from\"mdb-react-ui-kit\";import useAuth from\"../hooks/useAuth\";import useAxiosPrivate from\"../hooks/useAxiosPrivate\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Settings(){var _auth$userData2,_auth$userData3,_auth$userData4,_auth$userData5,_auth$userData6,_auth$userData7,_auth$userData8,_auth$userData9;var _useState=useState(),_useState2=_slicedToArray(_useState,2),oldPassword=_useState2[0],setOldPassword=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),newPassword=_useState4[0],setNewPassword=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),newPassword2=_useState6[0],setNewPassword2=_useState6[1];var axiosInstance=useAxiosPrivate();//Abfragen der Nutzerdaten aus Authentifizierungscontext\nvar _useAuth=useAuth(),auth=_useAuth.auth;var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),passwordError=_useState8[0],setPasswordError=_useState8[1];function handlePasswordSubmit(event){var _auth$userData;event.preventDefault();// Validierung\nif(oldPassword==\"\"||oldPassword==null){setPasswordError(\"Aktuelles Passwort eingeben.\");return;}if(newPassword==\"\"||newPassword==null){setPasswordError(\"Neues Passwort eingeben.\");return;}if(newPassword==\"\"||newPassword==null){setPasswordError(\"Neues Passwort wiederholen.\");return;}if(newPassword!==newPassword2){setPasswordError(\"Neue Passwörter stimmen nicht überein.\");return;}// Neues Passwort \"newPassword\" zum Passwort machen:\n// POST-Request\naxiosInstance.patch(\"/change_password/\"+((_auth$userData=auth.userData)===null||_auth$userData===void 0?void 0:_auth$userData.id)+\"/\",{password:newPassword,password2:newPassword2,oldPassword:oldPassword}).then(function(res){setPasswordError(\"Neues Passwort erfolgreich angelegt.\");return;}).catch(function(err){console.log(err);});}return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(MDBContainer,{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Benutzer-Account\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(MDBRow,{className:\"mb-2\",children:[/*#__PURE__*/_jsxs(MDBCol,{sm:\"6\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"mb-3\",children:\"Accountinformationen\"}),/*#__PURE__*/_jsx(\"h5\",{children:\"Unternehmen\"}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Name des Unternehmens: \"}),/*#__PURE__*/_jsx(\"br\",{}),(_auth$userData2=auth.userData)===null||_auth$userData2===void 0?void 0:_auth$userData2.employee.company.name]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"EORI-Nr.: \"}),/*#__PURE__*/_jsx(\"br\",{}),(_auth$userData3=auth.userData)===null||_auth$userData3===void 0?void 0:_auth$userData3.employee.company.eori_nr]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Stra\\xDFe u. Hausnr.: \"}),/*#__PURE__*/_jsx(\"br\",{}),(_auth$userData4=auth.userData)===null||_auth$userData4===void 0?void 0:_auth$userData4.employee.company.street]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"PLZ: \"}),/*#__PURE__*/_jsx(\"br\",{}),(_auth$userData5=auth.userData)===null||_auth$userData5===void 0?void 0:_auth$userData5.employee.company.city_code]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Stadt: \"}),/*#__PURE__*/_jsx(\"br\",{}),(_auth$userData6=auth.userData)===null||_auth$userData6===void 0?void 0:_auth$userData6.employee.company.city]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Land: \"}),/*#__PURE__*/_jsx(\"br\",{}),(_auth$userData7=auth.userData)===null||_auth$userData7===void 0?void 0:_auth$userData7.employee.company.country_code]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"E-Mail Adresse: \"}),/*#__PURE__*/_jsx(\"br\",{}),(_auth$userData8=auth.userData)===null||_auth$userData8===void 0?void 0:_auth$userData8.employee.company.email]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Telefonnr.: \"}),/*#__PURE__*/_jsx(\"br\",{}),(_auth$userData9=auth.userData)===null||_auth$userData9===void 0?void 0:_auth$userData9.employee.company.phone]}),/*#__PURE__*/_jsx(\"hr\",{className:\"my-4\"}),/*#__PURE__*/_jsx(\"h5\",{children:\"Eigenes Mitarbeiter-Konto\"}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Account-Name: \"}),/*#__PURE__*/_jsx(\"br\",{}),auth.username]})]}),/*#__PURE__*/_jsxs(MDBCol,{sm:\"6\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"mb-3\",children:\"Passwort aktualisieren\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handlePasswordSubmit,style:{width:\"300px\"},children:[/*#__PURE__*/_jsx(MDBInput,{value:oldPassword,onChange:function onChange(e){return setOldPassword(e.target.value);},autocomplete:\"new-password\",className:\"mb-4\",type:\"Password\",id:\"newPassword\",name:\"newPassword\",label:\"Aktuelles Passwort\"}),/*#__PURE__*/_jsx(MDBInput,{value:newPassword,onChange:function onChange(e){return setNewPassword(e.target.value);},autocomplete:\"new-password\",className:\"mb-3\",type:\"Password\",id:\"oldPassword\",name:\"oldPassword\",label:\"Neues Passwort\"}),/*#__PURE__*/_jsx(MDBInput,{value:newPassword2,onChange:function onChange(e){return setNewPassword2(e.target.value);},autocomplete:\"new-password\",className:\"mb-4\",type:\"Password\",id:\"oldPassword2\",name:\"oldPassword2\",label:\"Neues Passwort wiederholen\"}),/*#__PURE__*/_jsx(MDBBtn,{block:true,type:\"submit\",className:\"mb-4\",children:\"Passwort aktualisieren\"}),passwordError==\"Neues Passwort erfolgreich angelegt.\"?/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-success\",role:\"alert\",children:passwordError}):passwordError!==null?/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-danger\",role:\"alert\",children:passwordError}):null]})]})]})]})});}export default Settings;","map":{"version":3,"sources":["/Users/stephan/Dropbox/Entwicklung/webdev/projektstudium/client/src/pages/Settings.jsx"],"names":["React","useEffect","useState","MDBContainer","MDBInput","MDBBtn","MDBRow","MDBCol","useAuth","useAxiosPrivate","Settings","oldPassword","setOldPassword","newPassword","setNewPassword","newPassword2","setNewPassword2","axiosInstance","auth","passwordError","setPasswordError","handlePasswordSubmit","event","preventDefault","patch","userData","id","password","password2","then","res","catch","err","console","log","employee","company","name","eori_nr","street","city_code","city","country_code","email","phone","username","width","e","target","value"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport {\n  MDBContainer,\n  MDBInput,\n  MDBBtn,\n  MDBRow,\n  MDBCol,\n} from \"mdb-react-ui-kit\";\nimport useAuth from \"../hooks/useAuth\";\nimport useAxiosPrivate from \"../hooks/useAxiosPrivate\";\n\nfunction Settings() {\n  const [oldPassword, setOldPassword] = useState();\n  const [newPassword, setNewPassword] = useState();\n  const [newPassword2, setNewPassword2] = useState();\n\n  const axiosInstance = useAxiosPrivate();\n\n  //Abfragen der Nutzerdaten aus Authentifizierungscontext\n  const { auth } = useAuth();\n\n  const [passwordError, setPasswordError] = useState(null);\n\n  function handlePasswordSubmit(event) {\n    event.preventDefault();\n\n    // Validierung\n    if (oldPassword == \"\" || oldPassword == null) {\n      setPasswordError(\"Aktuelles Passwort eingeben.\");\n      return;\n    }\n    if (newPassword == \"\" || newPassword == null) {\n      setPasswordError(\"Neues Passwort eingeben.\");\n      return;\n    }\n    if (newPassword == \"\" || newPassword == null) {\n      setPasswordError(\"Neues Passwort wiederholen.\");\n      return;\n    }\n    if (newPassword !== newPassword2) {\n      setPasswordError(\"Neue Passwörter stimmen nicht überein.\");\n      return;\n    }\n\n    // Neues Passwort \"newPassword\" zum Passwort machen:\n    // POST-Request\n    axiosInstance\n      .patch(\"/change_password/\" + auth.userData?.id + \"/\", {\n        password: newPassword,\n        password2: newPassword2,\n        oldPassword: oldPassword,\n      })\n      .then((res) => {\n        setPasswordError(\"Neues Passwort erfolgreich angelegt.\");\n        return;\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }\n\n  return (\n    <div>\n      <MDBContainer>\n        <h3>Benutzer-Account</h3>\n        <br />\n        <MDBRow className=\"mb-2\">\n          <MDBCol sm=\"6\">\n            <h4 className=\"mb-3\">Accountinformationen</h4>\n            <h5>Unternehmen</h5>\n            <p>\n              <b>Name des Unternehmens: </b>\n              <br />\n              {auth.userData?.employee.company.name}\n            </p>\n            <p>\n              <b>EORI-Nr.: </b>\n              <br />\n              {auth.userData?.employee.company.eori_nr}\n            </p>\n            <p>\n              <b>Straße u. Hausnr.: </b>\n              <br />\n              {auth.userData?.employee.company.street}\n            </p>\n            <p>\n              <b>PLZ: </b>\n              <br />\n              {auth.userData?.employee.company.city_code}\n            </p>\n            <p>\n              <b>Stadt: </b>\n              <br />\n              {auth.userData?.employee.company.city}\n            </p>\n            <p>\n              <b>Land: </b>\n              <br />\n              {auth.userData?.employee.company.country_code}\n            </p>\n            <p>\n              <b>E-Mail Adresse: </b>\n              <br />\n              {auth.userData?.employee.company.email}\n            </p>\n            <p>\n              <b>Telefonnr.: </b>\n              <br />\n              {auth.userData?.employee.company.phone}\n            </p>\n            <hr className=\"my-4\" />\n            <h5>Eigenes Mitarbeiter-Konto</h5>\n            <p>\n              <b>Account-Name: </b>\n              <br />\n              {auth.username}\n            </p>\n          </MDBCol>\n          <MDBCol sm=\"6\">\n            <h4 className=\"mb-3\">Passwort aktualisieren</h4>\n            <form onSubmit={handlePasswordSubmit} style={{ width: \"300px\" }}>\n              <MDBInput\n                value={oldPassword}\n                onChange={(e) => setOldPassword(e.target.value)}\n                autocomplete=\"new-password\"\n                className=\"mb-4\"\n                type=\"Password\"\n                id=\"newPassword\"\n                name=\"newPassword\"\n                label=\"Aktuelles Passwort\"\n              />\n              <MDBInput\n                value={newPassword}\n                onChange={(e) => setNewPassword(e.target.value)}\n                autocomplete=\"new-password\"\n                className=\"mb-3\"\n                type=\"Password\"\n                id=\"oldPassword\"\n                name=\"oldPassword\"\n                label=\"Neues Passwort\"\n              />\n              <MDBInput\n                value={newPassword2}\n                onChange={(e) => setNewPassword2(e.target.value)}\n                autocomplete=\"new-password\"\n                className=\"mb-4\"\n                type=\"Password\"\n                id=\"oldPassword2\"\n                name=\"oldPassword2\"\n                label=\"Neues Passwort wiederholen\"\n              />\n\n              <MDBBtn block type=\"submit\" className=\"mb-4\">\n                Passwort aktualisieren\n              </MDBBtn>\n              {passwordError == \"Neues Passwort erfolgreich angelegt.\" ? (\n                <div className=\"alert alert-success\" role=\"alert\">\n                  {passwordError}\n                </div>\n              ) : passwordError !== null ? (\n                <div className=\"alert alert-danger\" role=\"alert\">\n                  {passwordError}\n                </div>\n              ) : null}\n            </form>\n          </MDBCol>\n        </MDBRow>\n      </MDBContainer>\n    </div>\n  );\n}\n\nexport default Settings;\n"]},"metadata":{},"sourceType":"module"}