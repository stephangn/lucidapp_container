{"ast":null,"code":"var _jsxFileName = \"/Users/stephan/Dropbox/Entwicklung/webdev/projektstudium/client/src/pages/Dashboard.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport \"./css/LoadingSpinner.css\";\nimport { MDBContainer, MDBCard, MDBCardBody, MDBCardTitle, MDBCardText, MDBBtn, MDBCardHeader, MDBRow, MDBCol, MDBIcon, MDBSpinner } from \"mdb-react-ui-kit\";\nimport Toast from \"react-bootstrap/Toast\";\nimport useAuth from \"../hooks/useAuth\";\nimport DashboardDocumentCard from \"../components/Dashboard/DashboardDocumentCard\";\nimport axiosInstance from \"../axiosApi\";\nimport { Backdrop } from \"@mui/material\";\nimport { CircularProgress } from \"@mui/material\";\nimport { Link } from \"react-router-dom\";\nimport NotificationToast from \"../components/Dashboard/NotifcationToast\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction Dashboard() {\n  _s();\n\n  // Transaktionen\n  const [transactionsData, setTransactionsData] = useState([]); // Dokumente\n\n  const [documentsData, setDocumentsData] = useState([]);\n  const [openRequests, setopenRequests] = useState([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const {\n    auth\n  } = useAuth();\n\n  async function getDashboardData() {\n    //Abfragen der Transaktionen\n    await axiosInstance.get(\"transactions/\").then(res => {\n      setTransactionsData(res.data);\n    }).catch(err => {\n      console.log(err);\n    }); //Abfragen der Dokumente\n\n    await axiosInstance.get(\"documents/\").then(res => {\n      setDocumentsData(res.data);\n    }).catch(err => {\n      console.log(err);\n    }); //Abfragen der unbestätigten Partnerschaften bei denen wir Partner 2 sind\n\n    await axiosInstance.get(`partnership/?partner2=${auth.eori_nr}&confirmed=false`).then(res => {\n      setopenRequests(res.data);\n    }).catch(function (error) {\n      if (error.response) {\n        // The request was made and the server responded with a status code\n        // that falls out of the range of 2xx\n        console.log(error.response.data);\n        console.log(error.response.status);\n        console.log(error.response.headers);\n      } else if (error.request) {\n        // The request was made but no response was received\n        // `error.request` is an instance of XMLHttpRequest in the browser and an instance of\n        // http.ClientRequest in node.js\n        console.log(error.request);\n      } else {\n        // Something happened in setting up the request that triggered an Error\n        console.log(\"Error\", error.message);\n      }\n    });\n    setIsLoading(false);\n  } // Transaktionen abrufen\n\n\n  useEffect(() => {\n    getDashboardData();\n  }, []); // Dokumente abrufen\n\n  useEffect(() => {\n    axiosInstance.get(\"documents/\").then(res => {\n      setDocumentsData(res.data);\n    });\n  }, []);\n  const [alerts, setAlerts] = useState([{\n    \"id\": 34,\n    \"level\": \"info\",\n    \"unread\": true,\n    \"actor_object_id\": \"11\",\n    \"verb\": \"wurde angelegt\",\n    \"description\": null,\n    \"target_object_id\": null,\n    \"action_object_object_id\": null,\n    \"timestamp\": \"2022-07-05T09:21:48.100353+02:00\",\n    \"public\": true,\n    \"deleted\": false,\n    \"emailed\": false,\n    \"data\": null,\n    \"recipient\": 8,\n    \"actor_content_type\": 11,\n    \"target_content_type\": null,\n    \"action_object_content_type\": null\n  }, {\n    \"id\": 33,\n    \"level\": \"info\",\n    \"unread\": true,\n    \"actor_object_id\": \"11\",\n    \"verb\": \"wurde angelegt\",\n    \"description\": null,\n    \"target_object_id\": null,\n    \"action_object_object_id\": null,\n    \"timestamp\": \"2022-07-05T09:21:48.100353+02:00\",\n    \"public\": true,\n    \"deleted\": false,\n    \"emailed\": false,\n    \"data\": null,\n    \"recipient\": 4,\n    \"actor_content_type\": 11,\n    \"target_content_type\": null,\n    \"action_object_content_type\": null\n  }, {\n    \"id\": 32,\n    \"level\": \"info\",\n    \"unread\": true,\n    \"actor_object_id\": \"11\",\n    \"verb\": \"wurde angelegt\",\n    \"description\": null,\n    \"target_object_id\": null,\n    \"action_object_object_id\": null,\n    \"timestamp\": \"2022-07-05T09:15:34.693338+02:00\",\n    \"public\": true,\n    \"deleted\": false,\n    \"emailed\": false,\n    \"data\": null,\n    \"recipient\": 8,\n    \"actor_content_type\": 11,\n    \"target_content_type\": null,\n    \"action_object_content_type\": null\n  }]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: isLoading ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"loadingSpinner\",\n      children: /*#__PURE__*/_jsxDEV(MDBSpinner, {\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"visually-hidden\",\n          children: \"L\\xE4dt..\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(MDBContainer, {\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Dashboard\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(MDBRow, {\n          children: [/*#__PURE__*/_jsxDEV(MDBCol, {\n            className: \"col-md-6 mb-4\",\n            children: /*#__PURE__*/_jsxDEV(MDBCard, {\n              style: {\n                height: \"500px\"\n              },\n              children: [/*#__PURE__*/_jsxDEV(MDBCardHeader, {\n                style: {\n                  background: \"#fbfbfb\"\n                },\n                children: /*#__PURE__*/_jsxDEV(\"b\", {\n                  children: \"Benachrichtigungen\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 176,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 175,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(MDBCardBody, {\n                className: \"overflow-scroll\",\n                children: /*#__PURE__*/_jsxDEV(MDBCardText, {\n                  children: alerts.map(alert => /*#__PURE__*/_jsxDEV(NotificationToast, {\n                    alert: alert\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 181,\n                    columnNumber: 23\n                  }, this))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 179,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 178,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 174,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 173,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(MDBCol, {\n            className: \"col-md-6 mb-4\",\n            children: [/*#__PURE__*/_jsxDEV(MDBCard, {\n              style: {\n                height: \"240px\",\n                marginBottom: \"20px\"\n              },\n              children: [/*#__PURE__*/_jsxDEV(MDBCardHeader, {\n                style: {\n                  background: \"#fbfbfb\"\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                  children: \"Anzahl aktiver Auftr\\xE4ge: \"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 194,\n                  columnNumber: 21\n                }, this), \" \", transactionsData.length]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 193,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(MDBCardBody, {\n                children: transactionsData !== [] ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                  children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                    children: \"Zuletzt aktualisiert:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 199,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(MDBCardTitle, {\n                    children: transactionsData[0].description\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 200,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(MDBCardText, {\n                    children: [transactionsData[0].partnership.partner.name, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 205,\n                      columnNumber: 27\n                    }, this), transactionsData[0].partnership.partner.street, \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 207,\n                      columnNumber: 27\n                    }, this), transactionsData[0].partnership.partner.city_code, \" \", transactionsData[0].partnership.partner.city, \",\", \" \", transactionsData[0].partnership.partner.country_code, \" \", /*#__PURE__*/_jsxDEV(Link, {\n                      style: {},\n                      to: \"/transactions/\" + transactionsData[0].id.toString(),\n                      children: /*#__PURE__*/_jsxDEV(MDBBtn, {\n                        outline: true,\n                        className: \"float-end\",\n                        children: \"Zum Auftrag\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 221,\n                        columnNumber: 29\n                      }, this)\n                    }, transactionsData[0].id, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 213,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 203,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true) : /*#__PURE__*/_jsxDEV(MDBCardTitle, {\n                  className: \"mt-5\",\n                  children: \"Keine neuen Anfragen\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 228,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 196,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 192,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(MDBCard, {\n              style: {\n                height: \"240px\"\n              },\n              children: [/*#__PURE__*/_jsxDEV(MDBCardHeader, {\n                style: {\n                  background: \"#fbfbfb\"\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                  children: \"Ausstehende Partneranfragen: \"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 237,\n                  columnNumber: 21\n                }, this), \" \", openRequests.length]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 236,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(MDBCardBody, {\n                children: openRequests.length != 0 ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                  children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                    children: \"Neuste Anfrage:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 242,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(MDBCardTitle, {\n                    children: openRequests[0].partner.name\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 243,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(MDBCardText, {\n                    children: [\"EORI: \", openRequests[0].partner.eori_nr, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 248,\n                      columnNumber: 27\n                    }, this), \"Anfragedatum: \", openRequests[0].date_added, /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"float-end\",\n                      children: /*#__PURE__*/_jsxDEV(Link, {\n                        style: {\n                          display: \"block\",\n                          margin: \"1rem 0\"\n                        },\n                        to: \"/partners/\",\n                        children: /*#__PURE__*/_jsxDEV(MDBBtn, {\n                          outline: true,\n                          className: \"float-end\",\n                          children: \"Zur Partner\\xFCbersicht\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 255,\n                          columnNumber: 31\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 251,\n                        columnNumber: 29\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 250,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 246,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true) : /*#__PURE__*/_jsxDEV(MDBCardTitle, {\n                  className: \"mt-5\",\n                  children: \"Keine neuen Anfragen\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 263,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 239,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 235,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 191,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(MDBRow, {\n          children: /*#__PURE__*/_jsxDEV(MDBCol, {\n            children: /*#__PURE__*/_jsxDEV(MDBCard, {\n              children: [/*#__PURE__*/_jsxDEV(MDBCardHeader, {\n                style: {\n                  background: \"#fbfbfb\"\n                },\n                children: /*#__PURE__*/_jsxDEV(\"b\", {\n                  children: \"Zuletzt hinzugef\\xFCgte Dokumente\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 275,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 274,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(MDBCardBody, {\n                children: /*#__PURE__*/_jsxDEV(MDBCardText, {\n                  children: documentsData !== [] ? /*#__PURE__*/_jsxDEV(MDBRow, {\n                    children: documentsData.slice(0, 3).map(document => /*#__PURE__*/_jsxDEV(React.Fragment, {\n                      children: [/*#__PURE__*/_jsxDEV(DashboardDocumentCard, {\n                        document: document\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 283,\n                        columnNumber: 31\n                      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 284,\n                        columnNumber: 31\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 282,\n                      columnNumber: 29\n                    }, this))\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 280,\n                    columnNumber: 25\n                  }, this) : /*#__PURE__*/_jsxDEV(MDBRow, {\n                    children: /*#__PURE__*/_jsxDEV(\"p\", {\n                      children: \"Es liegen noch keine Dokumente vor.\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 290,\n                      columnNumber: 27\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 289,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 278,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 277,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 273,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 272,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 271,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 9\n    }, this)\n  }, void 0, false);\n}\n\n_s(Dashboard, \"Nrep3GfqWqQIqO3znPY9m+2E1Q0=\", false, function () {\n  return [useAuth];\n});\n\n_c = Dashboard;\nexport default Dashboard;\n\nvar _c;\n\n$RefreshReg$(_c, \"Dashboard\");","map":{"version":3,"sources":["/Users/stephan/Dropbox/Entwicklung/webdev/projektstudium/client/src/pages/Dashboard.jsx"],"names":["React","useEffect","useState","MDBContainer","MDBCard","MDBCardBody","MDBCardTitle","MDBCardText","MDBBtn","MDBCardHeader","MDBRow","MDBCol","MDBIcon","MDBSpinner","Toast","useAuth","DashboardDocumentCard","axiosInstance","Backdrop","CircularProgress","Link","NotificationToast","Dashboard","transactionsData","setTransactionsData","documentsData","setDocumentsData","openRequests","setopenRequests","isLoading","setIsLoading","auth","getDashboardData","get","then","res","data","catch","err","console","log","eori_nr","error","response","status","headers","request","message","alerts","setAlerts","height","background","map","alert","marginBottom","length","description","partnership","partner","name","street","city_code","city","country_code","id","toString","date_added","display","margin","slice","document"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport \"./css/LoadingSpinner.css\";\nimport {\n  MDBContainer,\n  MDBCard,\n  MDBCardBody,\n  MDBCardTitle,\n  MDBCardText,\n  MDBBtn,\n  MDBCardHeader,\n  MDBRow,\n  MDBCol,\n  MDBIcon,\n  MDBSpinner,\n} from \"mdb-react-ui-kit\";\nimport Toast from \"react-bootstrap/Toast\";\n\nimport useAuth from \"../hooks/useAuth\";\n\nimport DashboardDocumentCard from \"../components/Dashboard/DashboardDocumentCard\";\nimport axiosInstance from \"../axiosApi\";\nimport { Backdrop } from \"@mui/material\";\nimport { CircularProgress } from \"@mui/material\";\nimport { Link } from \"react-router-dom\";\nimport NotificationToast from \"../components/Dashboard/NotifcationToast\";\n\nfunction Dashboard() {\n  // Transaktionen\n  const [transactionsData, setTransactionsData] = useState([]);\n\n  // Dokumente\n  const [documentsData, setDocumentsData] = useState([]);\n\n  const [openRequests, setopenRequests] = useState([]);\n\n  const [isLoading, setIsLoading] = useState(true);\n\n  const { auth } = useAuth();\n\n  async function getDashboardData() {\n    //Abfragen der Transaktionen\n    await axiosInstance\n      .get(\"transactions/\")\n      .then((res) => {\n        setTransactionsData(res.data);\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n\n    //Abfragen der Dokumente\n    await axiosInstance\n      .get(\"documents/\")\n      .then((res) => {\n        setDocumentsData(res.data);\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n    //Abfragen der unbestätigten Partnerschaften bei denen wir Partner 2 sind\n\n    await axiosInstance\n      .get(`partnership/?partner2=${auth.eori_nr}&confirmed=false`)\n      .then((res) => {\n        setopenRequests(res.data);\n      })\n      .catch(function (error) {\n        if (error.response) {\n          // The request was made and the server responded with a status code\n          // that falls out of the range of 2xx\n          console.log(error.response.data);\n          console.log(error.response.status);\n          console.log(error.response.headers);\n        } else if (error.request) {\n          // The request was made but no response was received\n          // `error.request` is an instance of XMLHttpRequest in the browser and an instance of\n          // http.ClientRequest in node.js\n          console.log(error.request);\n        } else {\n          // Something happened in setting up the request that triggered an Error\n          console.log(\"Error\", error.message);\n        }\n      });\n    setIsLoading(false);\n  }\n\n  // Transaktionen abrufen\n  useEffect(() => {\n    getDashboardData();\n  }, []);\n\n  // Dokumente abrufen\n  useEffect(() => {\n    axiosInstance.get(\"documents/\").then((res) => {\n      setDocumentsData(res.data);\n    });\n  }, []);\n\n\n  const [alerts, setAlerts] = useState([\n    {\n        \"id\": 34,\n        \"level\": \"info\",\n        \"unread\": true,\n        \"actor_object_id\": \"11\",\n        \"verb\": \"wurde angelegt\",\n        \"description\": null,\n        \"target_object_id\": null,\n        \"action_object_object_id\": null,\n        \"timestamp\": \"2022-07-05T09:21:48.100353+02:00\",\n        \"public\": true,\n        \"deleted\": false,\n        \"emailed\": false,\n        \"data\": null,\n        \"recipient\": 8,\n        \"actor_content_type\": 11,\n        \"target_content_type\": null,\n        \"action_object_content_type\": null\n    },\n    {\n        \"id\": 33,\n        \"level\": \"info\",\n        \"unread\": true,\n        \"actor_object_id\": \"11\",\n        \"verb\": \"wurde angelegt\",\n        \"description\": null,\n        \"target_object_id\": null,\n        \"action_object_object_id\": null,\n        \"timestamp\": \"2022-07-05T09:21:48.100353+02:00\",\n        \"public\": true,\n        \"deleted\": false,\n        \"emailed\": false,\n        \"data\": null,\n        \"recipient\": 4,\n        \"actor_content_type\": 11,\n        \"target_content_type\": null,\n        \"action_object_content_type\": null\n    },\n    {\n        \"id\": 32,\n        \"level\": \"info\",\n        \"unread\": true,\n        \"actor_object_id\": \"11\",\n        \"verb\": \"wurde angelegt\",\n        \"description\": null,\n        \"target_object_id\": null,\n        \"action_object_object_id\": null,\n        \"timestamp\": \"2022-07-05T09:15:34.693338+02:00\",\n        \"public\": true,\n        \"deleted\": false,\n        \"emailed\": false,\n        \"data\": null,\n        \"recipient\": 8,\n        \"actor_content_type\": 11,\n        \"target_content_type\": null,\n        \"action_object_content_type\": null\n    }])\n\n  return (\n    <>\n      {isLoading ? (\n        <div className=\"loadingSpinner\">\n          <MDBSpinner>\n            <span className=\"visually-hidden\">Lädt..</span>\n          </MDBSpinner>\n        </div>\n      ) : (\n        <div>\n          <MDBContainer>\n            <h3>Dashboard</h3>\n            <br />\n            <MDBRow>\n              <MDBCol className=\"col-md-6 mb-4\">\n                <MDBCard style={{ height: \"500px\" }}>\n                  <MDBCardHeader style={{ background: \"#fbfbfb\" }}>\n                    <b>Benachrichtigungen</b>\n                  </MDBCardHeader>\n                  <MDBCardBody className=\"overflow-scroll\">\n                    <MDBCardText>\n                    {alerts.map((alert) => (\n                      <NotificationToast\n                        alert = {alert}\n                      />\n                    ))}\n\n\n                    </MDBCardText>\n                  </MDBCardBody>\n                </MDBCard>\n              </MDBCol>\n              <MDBCol className=\"col-md-6 mb-4\">\n                <MDBCard style={{ height: \"240px\", marginBottom: \"20px\" }}>\n                  <MDBCardHeader style={{ background: \"#fbfbfb\" }}>\n                    <b>Anzahl aktiver Aufträge: </b> {transactionsData.length}\n                  </MDBCardHeader>\n                  <MDBCardBody>\n                    {transactionsData !== [] ? (\n                      <>\n                        <i>Zuletzt aktualisiert:</i>\n                        <MDBCardTitle>\n                          {transactionsData[0].description}\n                        </MDBCardTitle>\n                        <MDBCardText>\n                          {transactionsData[0].partnership.partner.name}\n                          <br />\n                          {transactionsData[0].partnership.partner.street}{\" \"}\n                          <br />\n                          {\n                            transactionsData[0].partnership.partner.city_code\n                          }{\" \"}\n                          {transactionsData[0].partnership.partner.city},{\" \"}\n                          {transactionsData[0].partnership.partner.country_code}{\" \"}\n                          <Link\n                            style={{}}\n                            to={\n                              \"/transactions/\" +\n                              transactionsData[0].id.toString()\n                            }\n                            key={transactionsData[0].id}\n                          >\n                            <MDBBtn outline className=\"float-end\">\n                              Zum Auftrag\n                            </MDBBtn>\n                          </Link>\n                        </MDBCardText>\n                      </>\n                    ) : (\n                      <MDBCardTitle className=\"mt-5\">\n                        Keine neuen Anfragen\n                      </MDBCardTitle>\n                    )}\n                  </MDBCardBody>\n                </MDBCard>\n\n                <MDBCard style={{ height: \"240px\" }}>\n                  <MDBCardHeader style={{ background: \"#fbfbfb\" }}>\n                    <b>Ausstehende Partneranfragen: </b> {openRequests.length}\n                  </MDBCardHeader>\n                  <MDBCardBody>\n                    {openRequests.length != 0 ? (\n                      <>\n                        <i>Neuste Anfrage:</i>\n                        <MDBCardTitle>\n                          {openRequests[0].partner.name}\n                        </MDBCardTitle>\n                        <MDBCardText>\n                          EORI: {openRequests[0].partner.eori_nr}\n                          <br />\n                          Anfragedatum: {openRequests[0].date_added}\n                          <div className=\"float-end\">\n                            <Link\n                              style={{ display: \"block\", margin: \"1rem 0\" }}\n                              to={\"/partners/\"}\n                            >\n                              <MDBBtn outline className=\"float-end\">\n                                Zur Partnerübersicht\n                              </MDBBtn>\n                            </Link>\n                          </div>\n                        </MDBCardText>\n                      </>\n                    ) : (\n                      <MDBCardTitle className=\"mt-5\">\n                        Keine neuen Anfragen\n                      </MDBCardTitle>\n                    )}\n                  </MDBCardBody>\n                </MDBCard>\n              </MDBCol>\n            </MDBRow>\n            <MDBRow>\n              <MDBCol>\n                <MDBCard>\n                  <MDBCardHeader style={{ background: \"#fbfbfb\" }}>\n                    <b>Zuletzt hinzugefügte Dokumente</b>\n                  </MDBCardHeader>\n                  <MDBCardBody>\n                    <MDBCardText>\n                      {documentsData !== [] ? (\n                        <MDBRow>\n                          {documentsData.slice(0, 3).map((document) => (\n                            <React.Fragment>\n                              <DashboardDocumentCard document={document} />\n                              <br />\n                            </React.Fragment>\n                          ))}\n                        </MDBRow>\n                      ) : (\n                        <MDBRow>\n                          <p>Es liegen noch keine Dokumente vor.</p>\n                        </MDBRow>\n                      )}\n                    </MDBCardText>\n                  </MDBCardBody>\n                </MDBCard>\n              </MDBCol>\n            </MDBRow>\n          </MDBContainer>\n        </div>\n      )}\n    </>\n  );\n}\n\nexport default Dashboard;\n"]},"metadata":{},"sourceType":"module"}