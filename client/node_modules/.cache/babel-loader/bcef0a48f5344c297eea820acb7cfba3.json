{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport axiosInstance from \"../axiosApi\";\nimport useAuth from \"./useAuth\";\nimport useAxiosPrivate from \"./useAxiosPrivate\";\n\nconst useRefreshToken = () => {\n  _s();\n\n  const {\n    setAuth\n  } = useAuth();\n  const refreshToken = localStorage.getItem(\"refresh_token\");\n  const axiosPrivateInstance = useAxiosPrivate();\n\n  const refresh = async () => {\n    console.log(`Neuer Access token wird angefordert. Genutzter Refresh Token ${refreshToken}`);\n    const response = await axiosInstance.post('/api/token/refresh/', //Refresh Token an Server für neuen Access Token\n    JSON.stringify({\n      refresh: refreshToken\n    }));\n    setAuth(prev => {\n      console.log(JSON.stringify(prev));\n      console.log(`New AccessToken received : ${response.data.access}`);\n      return { ...prev,\n        accessToken: response.data.access\n      };\n    });\n    const refreshData = await axiosPrivateInstance.get('/user/');\n    setAuth(prev => {\n      console.log(`Data received : ${refreshData.data.company}`);\n      return { ...prev,\n        company: refreshData.data.employee.comapy\n      };\n    });\n    return response.data.access;\n  };\n\n  return refresh;\n};\n\n_s(useRefreshToken, \"xb1YReIl4ilKr6Or4Th5CU26C3o=\", false, function () {\n  return [useAuth, useAxiosPrivate];\n});\n\nexport default useRefreshToken;","map":{"version":3,"sources":["/Users/stephan/Dropbox/Entwicklung/webdev/projektstudium/client/src/hooks/useRefreshToken.js"],"names":["axiosInstance","useAuth","useAxiosPrivate","useRefreshToken","setAuth","refreshToken","localStorage","getItem","axiosPrivateInstance","refresh","console","log","response","post","JSON","stringify","prev","data","access","accessToken","refreshData","get","company","employee","comapy"],"mappings":";;AAAA,OAAOA,aAAP,MAA0B,aAA1B;AACA,OAAOC,OAAP,MAAoB,WAApB;AACA,OAAOC,eAAP,MAA4B,mBAA5B;;AAGA,MAAMC,eAAe,GAAG,MAAM;AAAA;;AAC1B,QAAM;AAAEC,IAAAA;AAAF,MAAcH,OAAO,EAA3B;AACA,QAAMI,YAAY,GAAGC,YAAY,CAACC,OAAb,CAAqB,eAArB,CAArB;AACA,QAAMC,oBAAoB,GAAGN,eAAe,EAA5C;;AACA,QAAMO,OAAO,GAAG,YAAW;AACvBC,IAAAA,OAAO,CAACC,GAAR,CAAa,gEAA+DN,YAAa,EAAzF;AACA,UAAMO,QAAQ,GAAG,MAAMZ,aAAa,CAACa,IAAd,CAAmB,qBAAnB,EACnB;AACAC,IAAAA,IAAI,CAACC,SAAL,CAAe;AAACN,MAAAA,OAAO,EAAEJ;AAAV,KAAf,CAFmB,CAAvB;AAKAD,IAAAA,OAAO,CAACY,IAAI,IAAI;AACZN,MAAAA,OAAO,CAACC,GAAR,CAAYG,IAAI,CAACC,SAAL,CAAeC,IAAf,CAAZ;AACAN,MAAAA,OAAO,CAACC,GAAR,CAAa,8BAA6BC,QAAQ,CAACK,IAAT,CAAcC,MAAO,EAA/D;AACA,aAAO,EACH,GAAGF,IADA;AAEHG,QAAAA,WAAW,EAAEP,QAAQ,CAACK,IAAT,CAAcC;AAFxB,OAAP;AAIH,KAPM,CAAP;AAQA,UAAME,WAAW,GAAG,MAAMZ,oBAAoB,CAACa,GAArB,CAAyB,QAAzB,CAA1B;AACAjB,IAAAA,OAAO,CAACY,IAAI,IAAI;AACZN,MAAAA,OAAO,CAACC,GAAR,CAAa,mBAAkBS,WAAW,CAACH,IAAZ,CAAiBK,OAAQ,EAAxD;AACA,aAAO,EACH,GAAGN,IADA;AAEHM,QAAAA,OAAO,EAAEF,WAAW,CAACH,IAAZ,CAAiBM,QAAjB,CAA0BC;AAFhC,OAAP;AAIH,KANM,CAAP;AAOA,WAAOZ,QAAQ,CAACK,IAAT,CAAcC,MAArB;AAEH,GAzBD;;AA6BF,SAAOT,OAAP;AAED,CAnCD;;GAAMN,e;UACkBF,O,EAESC,e;;;AAkCjC,eAAeC,eAAf","sourcesContent":["import axiosInstance from \"../axiosApi\"\nimport useAuth from \"./useAuth\"\nimport useAxiosPrivate from \"./useAxiosPrivate\";\n\n\nconst useRefreshToken = () => {\n    const { setAuth } = useAuth();\n    const refreshToken = localStorage.getItem(\"refresh_token\");\n    const axiosPrivateInstance = useAxiosPrivate();\n    const refresh = async() => {\n        console.log(`Neuer Access token wird angefordert. Genutzter Refresh Token ${refreshToken}`);\n        const response = await axiosInstance.post('/api/token/refresh/', \n            //Refresh Token an Server für neuen Access Token\n            JSON.stringify({refresh: refreshToken}),\n        );\n    \n        setAuth(prev => {\n            console.log(JSON.stringify(prev));\n            console.log(`New AccessToken received : ${response.data.access}`);\n            return {\n                ...prev,\n                accessToken: response.data.access\n            }\n        });\n        const refreshData = await axiosPrivateInstance.get('/user/');\n        setAuth(prev => {\n            console.log(`Data received : ${refreshData.data.company}`);\n            return {\n                ...prev,\n                company: refreshData.data.employee.comapy\n            }\n        });\n        return response.data.access; \n        \n    }\n\n\n\n  return refresh\n\n}\n\nexport default useRefreshToken"]},"metadata":{},"sourceType":"module"}