{"ast":null,"code":"import _asyncToGenerator from\"/Users/stephan/Dropbox/Entwicklung/webdev/projektstudium/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/stephan/Dropbox/Entwicklung/webdev/projektstudium/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/stephan/Dropbox/Entwicklung/webdev/projektstudium/client/node_modules/@babel/runtime/regenerator/index.js\";import React,{useEffect,useState}from\"react\";import\"./css/LoadingSpinner.css\";import{MDBContainer,MDBCard,MDBCardBody,MDBCardTitle,MDBCardText,MDBBtn,MDBCardHeader,MDBRow,MDBCol,MDBSpinner}from\"mdb-react-ui-kit\";import useAuth from\"../hooks/useAuth\";import DashboardDocumentCard from\"../components/Dashboard/DashboardDocumentCard\";import axiosInstance from\"../axiosApi\";import{Link}from\"react-router-dom\";import NotificationToast from\"../components/Dashboard/NotifcationToast\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Dashboard(){// Transaktionen\nvar _useState=useState([]),_useState2=_slicedToArray(_useState,2),transactionsData=_useState2[0],setTransactionsData=_useState2[1];// Dokumente\nvar _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),documentsData=_useState4[0],setDocumentsData=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),openRequests=_useState6[0],setopenRequests=_useState6[1];var _useState7=useState(true),_useState8=_slicedToArray(_useState7,2),isLoading=_useState8[0],setIsLoading=_useState8[1];var _useAuth=useAuth(),auth=_useAuth.auth;// DB Call\nfunction getDashboardData(){return _getDashboardData.apply(this,arguments);}// Transaktionen abrufen\nfunction _getDashboardData(){_getDashboardData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axiosInstance.get(\"transactions/\").then(function(res){setTransactionsData(res.data);}).catch(function(err){console.log(err);});case 2:_context.next=4;return axiosInstance.get(\"documents/\").then(function(res){setDocumentsData(res.data);}).catch(function(err){console.log(err);});case 4:_context.next=6;return axiosInstance.get(\"partnership/?partner2=\".concat(auth.eori_nr,\"&confirmed=false\")).then(function(res){setopenRequests(res.data);}).catch(function(error){if(error.response){// The request was made and the server responded with a status code\n// that falls out of the range of 2xx\nconsole.log(error.response.data);console.log(error.response.status);console.log(error.response.headers);}else if(error.request){// The request was made but no response was received\n// `error.request` is an instance of XMLHttpRequest in the browser and an instance of\n// http.ClientRequest in node.js\nconsole.log(error.request);}else{// Something happened in setting up the request that triggered an Error\nconsole.log(\"Error\",error.message);}});case 6:_context.next=8;return axiosInstance.get(\"/alerts?unread=true\").then(function(res){setAlerts(res.data);}).catch(function(error){if(error.response){// The request was made and the server responded with a status code\n// that falls out of the range of 2xx\nconsole.log(error.response.data);console.log(error.response.status);console.log(error.response.headers);}else if(error.request){// The request was made but no response was received\n// `error.request` is an instance of XMLHttpRequest in the browser and an instance of\n// http.ClientRequest in node.js\nconsole.log(error.request);}else{// Something happened in setting up the request that triggered an Error\nconsole.log(\"Error\",error.message);}});case 8:setIsLoading(false);case 9:case\"end\":return _context.stop();}}},_callee);}));return _getDashboardData.apply(this,arguments);}useEffect(function(){getDashboardData();},[]);// Dokumente abrufen\nuseEffect(function(){axiosInstance.get(\"documents/\").then(function(res){setDocumentsData(res.data);});},[]);var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),alerts=_useState10[0],setAlerts=_useState10[1];return/*#__PURE__*/_jsx(_Fragment,{children:isLoading?/*#__PURE__*/_jsx(\"div\",{className:\"loadingSpinner\",children:/*#__PURE__*/_jsx(MDBSpinner,{children:/*#__PURE__*/_jsx(\"span\",{className:\"visually-hidden\",children:\"L\\xE4dt..\"})})}):/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(MDBContainer,{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Dashboard\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(MDBRow,{children:[/*#__PURE__*/_jsx(MDBCol,{className:\"col-md-6 mb-4\",children:/*#__PURE__*/_jsxs(MDBCard,{style:{height:\"500px\"},children:[/*#__PURE__*/_jsx(MDBCardHeader,{style:{background:\"#fbfbfb\"},children:/*#__PURE__*/_jsx(\"b\",{children:\"Benachrichtigungen\"})}),/*#__PURE__*/_jsx(MDBCardBody,{className:\"overflow-scroll\",children:/*#__PURE__*/_jsx(MDBCardText,{children:/*#__PURE__*/_jsx(_Fragment,{children:alerts.length!==0?/*#__PURE__*/_jsx(_Fragment,{children:alerts.map(function(alert){return/*#__PURE__*/_jsx(NotificationToast,{alert:alert},alert.id);})}):/*#__PURE__*/_jsx(MDBCardTitle,{className:\"mt-5\",children:\"Keine neuen Benachrichtungen\"})})})})]})}),/*#__PURE__*/_jsxs(MDBCol,{className:\"col-md-6 mb-4\",children:[/*#__PURE__*/_jsxs(MDBCard,{style:{height:\"240px\",marginBottom:\"20px\"},children:[/*#__PURE__*/_jsxs(MDBCardHeader,{style:{background:\"#fbfbfb\"},children:[/*#__PURE__*/_jsx(\"b\",{children:\"Anzahl aktiver Auftr\\xE4ge: \"}),\" \",transactionsData.length]}),/*#__PURE__*/_jsx(MDBCardBody,{children:transactionsData!==[]?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"i\",{children:\"Zuletzt aktualisiert:\"}),/*#__PURE__*/_jsx(MDBCardTitle,{children:transactionsData[0].description}),/*#__PURE__*/_jsxs(MDBCardText,{children:[transactionsData[0].partnership.partner.name,/*#__PURE__*/_jsx(\"br\",{}),transactionsData[0].partnership.partner.street,\" \",/*#__PURE__*/_jsx(\"br\",{}),transactionsData[0].partnership.partner.city_code,\" \",transactionsData[0].partnership.partner.city,\",\",\" \",transactionsData[0].partnership.partner.country_code,\" \",/*#__PURE__*/_jsx(Link,{style:{},to:\"/transactions/\"+transactionsData[0].id.toString(),children:/*#__PURE__*/_jsx(MDBBtn,{outline:true,className:\"float-end\",children:\"Zum Auftrag\"})},transactionsData[0].id)]})]}):/*#__PURE__*/_jsx(MDBCardTitle,{className:\"mt-5\",children:\"Keine neuen Anfragen\"})})]}),/*#__PURE__*/_jsxs(MDBCard,{style:{height:\"240px\"},children:[/*#__PURE__*/_jsxs(MDBCardHeader,{style:{background:\"#fbfbfb\"},children:[/*#__PURE__*/_jsx(\"b\",{children:\"Ausstehende Partneranfragen: \"}),\" \",openRequests.length]}),/*#__PURE__*/_jsx(MDBCardBody,{children:openRequests.length!=0?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"i\",{children:\"Neuste Anfrage:\"}),/*#__PURE__*/_jsx(MDBCardTitle,{children:openRequests[0].partner.name}),/*#__PURE__*/_jsxs(MDBCardText,{children:[\"EORI: \",openRequests[0].partner.eori_nr,/*#__PURE__*/_jsx(\"br\",{}),\"Anfragedatum: \",openRequests[0].date_added,/*#__PURE__*/_jsx(\"div\",{className:\"float-end\",children:/*#__PURE__*/_jsx(Link,{style:{display:\"block\",margin:\"1rem 0\"},to:\"/partners/\",children:/*#__PURE__*/_jsx(MDBBtn,{outline:true,className:\"float-end\",children:\"Zur Partner\\xFCbersicht\"})})})]})]}):/*#__PURE__*/_jsx(MDBCardTitle,{className:\"mt-5\",children:\"Keine neuen Anfragen\"})})]})]})]}),/*#__PURE__*/_jsx(MDBRow,{children:/*#__PURE__*/_jsx(MDBCol,{children:/*#__PURE__*/_jsxs(MDBCard,{children:[/*#__PURE__*/_jsx(MDBCardHeader,{style:{background:\"#fbfbfb\"},children:/*#__PURE__*/_jsx(\"b\",{children:\"Zuletzt hinzugef\\xFCgte Dokumente\"})}),/*#__PURE__*/_jsx(MDBCardBody,{children:/*#__PURE__*/_jsx(MDBCardText,{children:documentsData!==[]?/*#__PURE__*/_jsx(MDBRow,{className:\"d-flex justify-content-center\",children:documentsData.slice(0,3).map(function(document){return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(DashboardDocumentCard,{document:document}),/*#__PURE__*/_jsx(\"br\",{})]},document.id);})}):/*#__PURE__*/_jsx(MDBRow,{children:/*#__PURE__*/_jsx(\"p\",{children:\"Es liegen noch keine Dokumente vor.\"})})})})]})})})]})})});}export default Dashboard;","map":{"version":3,"sources":["/Users/stephan/Dropbox/Entwicklung/webdev/projektstudium/client/src/pages/Dashboard.jsx"],"names":["React","useEffect","useState","MDBContainer","MDBCard","MDBCardBody","MDBCardTitle","MDBCardText","MDBBtn","MDBCardHeader","MDBRow","MDBCol","MDBSpinner","useAuth","DashboardDocumentCard","axiosInstance","Link","NotificationToast","Dashboard","transactionsData","setTransactionsData","documentsData","setDocumentsData","openRequests","setopenRequests","isLoading","setIsLoading","auth","getDashboardData","get","then","res","data","catch","err","console","log","eori_nr","error","response","status","headers","request","message","setAlerts","alerts","height","background","length","map","alert","id","marginBottom","description","partnership","partner","name","street","city_code","city","country_code","toString","date_added","display","margin","slice","document"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport \"./css/LoadingSpinner.css\";\nimport {\n  MDBContainer,\n  MDBCard,\n  MDBCardBody,\n  MDBCardTitle,\n  MDBCardText,\n  MDBBtn,\n  MDBCardHeader,\n  MDBRow,\n  MDBCol,\n  MDBSpinner,\n} from \"mdb-react-ui-kit\";\n\nimport useAuth from \"../hooks/useAuth\";\n\nimport DashboardDocumentCard from \"../components/Dashboard/DashboardDocumentCard\";\nimport axiosInstance from \"../axiosApi\";\nimport { Link } from \"react-router-dom\";\nimport NotificationToast from \"../components/Dashboard/NotifcationToast\";\n\nfunction Dashboard() {\n  // Transaktionen\n  const [transactionsData, setTransactionsData] = useState([]);\n\n  // Dokumente\n  const [documentsData, setDocumentsData] = useState([]);\n\n  const [openRequests, setopenRequests] = useState([]);\n\n  const [isLoading, setIsLoading] = useState(true);\n\n  const { auth } = useAuth();\n\n  // DB Call\n  async function getDashboardData() {\n    //Abfragen der Transaktionen\n    await axiosInstance\n      .get(\"transactions/\")\n      .then((res) => {\n        setTransactionsData(res.data);\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n\n    //Abfragen der Dokumente\n    await axiosInstance\n      .get(\"documents/\")\n      .then((res) => {\n        setDocumentsData(res.data);\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n    //Abfragen der unbestätigten Partnerschaften bei denen wir Partner 2 sind\n\n    await axiosInstance\n      .get(`partnership/?partner2=${auth.eori_nr}&confirmed=false`)\n      .then((res) => {\n        setopenRequests(res.data);\n      })\n      .catch(function (error) {\n        if (error.response) {\n          // The request was made and the server responded with a status code\n          // that falls out of the range of 2xx\n          console.log(error.response.data);\n          console.log(error.response.status);\n          console.log(error.response.headers);\n        } else if (error.request) {\n          // The request was made but no response was received\n          // `error.request` is an instance of XMLHttpRequest in the browser and an instance of\n          // http.ClientRequest in node.js\n          console.log(error.request);\n        } else {\n          // Something happened in setting up the request that triggered an Error\n          console.log(\"Error\", error.message);\n        }\n      });\n    await axiosInstance\n      .get(`/alerts?unread=true`)\n      .then((res) => {\n        setAlerts(res.data);\n      })\n      .catch(function (error) {\n        if (error.response) {\n          // The request was made and the server responded with a status code\n          // that falls out of the range of 2xx\n          console.log(error.response.data);\n          console.log(error.response.status);\n          console.log(error.response.headers);\n        } else if (error.request) {\n          // The request was made but no response was received\n          // `error.request` is an instance of XMLHttpRequest in the browser and an instance of\n          // http.ClientRequest in node.js\n          console.log(error.request);\n        } else {\n          // Something happened in setting up the request that triggered an Error\n          console.log(\"Error\", error.message);\n        }\n      });\n    setIsLoading(false);\n  }\n\n  // Transaktionen abrufen\n  useEffect(() => {\n    getDashboardData();\n  }, []);\n\n  // Dokumente abrufen\n  useEffect(() => {\n    axiosInstance.get(\"documents/\").then((res) => {\n      setDocumentsData(res.data);\n    });\n  }, []);\n\n  const [alerts, setAlerts] = useState([]);\n\n  return (\n    <>\n      {isLoading ? (\n        <div className=\"loadingSpinner\">\n          <MDBSpinner>\n            <span className=\"visually-hidden\">Lädt..</span>\n          </MDBSpinner>\n        </div>\n      ) : (\n        <div>\n          <MDBContainer>\n            <h3>Dashboard</h3>\n            <br />\n            <MDBRow>\n              <MDBCol className=\"col-md-6 mb-4\">\n                <MDBCard style={{ height: \"500px\" }}>\n                  <MDBCardHeader style={{ background: \"#fbfbfb\" }}>\n                    <b>Benachrichtigungen</b>\n                  </MDBCardHeader>\n                  <MDBCardBody className=\"overflow-scroll\">\n                    <MDBCardText>\n                      <>\n                        {alerts.length !== 0 ? (\n                          <>\n                            {alerts.map((alert) => (\n                              <NotificationToast key={alert.id} alert={alert} />\n                            ))}\n                          </>\n                        ) : (\n                          <MDBCardTitle className=\"mt-5\">\n                            Keine neuen Benachrichtungen\n                          </MDBCardTitle>\n                        )}\n                      </>\n                    </MDBCardText>\n                  </MDBCardBody>\n                </MDBCard>\n              </MDBCol>\n              <MDBCol className=\"col-md-6 mb-4\">\n                <MDBCard style={{ height: \"240px\", marginBottom: \"20px\" }}>\n                  <MDBCardHeader style={{ background: \"#fbfbfb\" }}>\n                    <b>Anzahl aktiver Aufträge: </b> {transactionsData.length}\n                  </MDBCardHeader>\n                  <MDBCardBody>\n                    {transactionsData !== [] ? (\n                      <>\n                        <i>Zuletzt aktualisiert:</i>\n                        <MDBCardTitle>\n                          {transactionsData[0].description}\n                        </MDBCardTitle>\n                        <MDBCardText>\n                          {transactionsData[0].partnership.partner.name}\n                          <br />\n                          {transactionsData[0].partnership.partner.street}{\" \"}\n                          <br />\n                          {\n                            transactionsData[0].partnership.partner.city_code\n                          }{\" \"}\n                          {transactionsData[0].partnership.partner.city},{\" \"}\n                          {transactionsData[0].partnership.partner.country_code}{\" \"}\n                          <Link\n                            style={{}}\n                            to={\n                              \"/transactions/\" +\n                              transactionsData[0].id.toString()\n                            }\n                            key={transactionsData[0].id}\n                          >\n                            <MDBBtn outline className=\"float-end\">\n                              Zum Auftrag\n                            </MDBBtn>\n                          </Link>\n                        </MDBCardText>\n                      </>\n                    ) : (\n                      <MDBCardTitle className=\"mt-5\">\n                        Keine neuen Anfragen\n                      </MDBCardTitle>\n                    )}\n                  </MDBCardBody>\n                </MDBCard>\n\n                <MDBCard style={{ height: \"240px\" }}>\n                  <MDBCardHeader style={{ background: \"#fbfbfb\" }}>\n                    <b>Ausstehende Partneranfragen: </b> {openRequests.length}\n                  </MDBCardHeader>\n                  <MDBCardBody>\n                    {openRequests.length != 0 ? (\n                      <>\n                        <i>Neuste Anfrage:</i>\n                        <MDBCardTitle>\n                          {openRequests[0].partner.name}\n                        </MDBCardTitle>\n                        <MDBCardText>\n                          EORI: {openRequests[0].partner.eori_nr}\n                          <br />\n                          Anfragedatum: {openRequests[0].date_added}\n                          <div className=\"float-end\">\n                            <Link\n                              style={{ display: \"block\", margin: \"1rem 0\" }}\n                              to={\"/partners/\"}\n                            >\n                              <MDBBtn outline className=\"float-end\">\n                                Zur Partnerübersicht\n                              </MDBBtn>\n                            </Link>\n                          </div>\n                        </MDBCardText>\n                      </>\n                    ) : (\n                      <MDBCardTitle className=\"mt-5\">\n                        Keine neuen Anfragen\n                      </MDBCardTitle>\n                    )}\n                  </MDBCardBody>\n                </MDBCard>\n              </MDBCol>\n            </MDBRow>\n            <MDBRow>\n              <MDBCol>\n                <MDBCard>\n                  <MDBCardHeader style={{ background: \"#fbfbfb\" }}>\n                    <b>Zuletzt hinzugefügte Dokumente</b>\n                  </MDBCardHeader>\n                  <MDBCardBody>\n                    <MDBCardText>\n                      {documentsData !== [] ? (\n                        <MDBRow className=\"d-flex justify-content-center\">\n                          {documentsData.slice(0, 3).map((document) => (\n                            <React.Fragment key={document.id}>\n                              <DashboardDocumentCard document={document} />\n                              <br />\n                            </React.Fragment>\n                          ))}\n                        </MDBRow>\n                      ) : (\n                        <MDBRow>\n                          <p>Es liegen noch keine Dokumente vor.</p>\n                        </MDBRow>\n                      )}\n                    </MDBCardText>\n                  </MDBCardBody>\n                </MDBCard>\n              </MDBCol>\n            </MDBRow>\n          </MDBContainer>\n        </div>\n      )}\n    </>\n  );\n}\n\nexport default Dashboard;\n"]},"metadata":{},"sourceType":"module"}