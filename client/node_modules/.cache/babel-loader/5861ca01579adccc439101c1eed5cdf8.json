{"ast":null,"code":"import _slicedToArray from\"/Users/stephan/Dropbox/Entwicklung/webdev/projektstudium/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{React,useState,useEffect}from\"react\";import Toast from\"react-bootstrap/Toast\";import axiosInstance from\"../../axiosApi\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function NotificationToast(props){var timestamp=new Date(props.alert.timestamp);var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),notificationText=_useState2[0],setNotificationText=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),notificationObject=_useState4[0],setNotificationObject=_useState4[1];var _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),showB=_useState6[0],setShowB=_useState6[1];var toggleShowB=function toggleShowB(){return setShowB(!showB);};useEffect(function(){var _props$alert,_props$alert3;if(((_props$alert=props.alert)===null||_props$alert===void 0?void 0:_props$alert.target_content_type)==\"10\"){var _props$alert2;setNotificationText((_props$alert2=props.alert)===null||_props$alert2===void 0?void 0:_props$alert2.description);setNotificationObject(\"Partnerschaftsanfrage\");}else if(((_props$alert3=props.alert)===null||_props$alert3===void 0?void 0:_props$alert3.target_content_type)==\"11\"){var _props$alert4;var text=(_props$alert4=props.alert)===null||_props$alert4===void 0?void 0:_props$alert4.description;setNotificationText(text);setNotificationObject(\"Auftrags-ID \".concat(props.alert.target_object_id));}else{var _props$alert5;var _text=\"sonstige Benachrichtigung\";setNotificationText((_props$alert5=props.alert)===null||_props$alert5===void 0?void 0:_props$alert5.description);setNotificationObject(\"Allgemeine Benachrichtigung\");}},[alert]);var markasread=function markasread(){var _props$alert6;return axiosInstance.patch(\"/alerts/\".concat((_props$alert6=props.alert)===null||_props$alert6===void 0?void 0:_props$alert6.id,\"/\"),{unread:false}).then(function(res){toggleShowB();}).catch(function(err){console.log(err);});};return/*#__PURE__*/_jsxs(Toast,{className:\"mb-2\",bg:\"light\",style:{width:\"100%\"},onClose:markasread,show:showB,children:[/*#__PURE__*/_jsxs(Toast.Header,{children:[/*#__PURE__*/_jsx(\"strong\",{className:\"me-auto\",children:notificationObject}),/*#__PURE__*/_jsx(\"small\",{children:timestamp.toLocaleString()})]}),/*#__PURE__*/_jsx(Toast.Body,{children:notificationText})]});}","map":{"version":3,"sources":["/Users/stephan/Dropbox/Entwicklung/webdev/projektstudium/client/src/components/Dashboard/NotifcationToast.jsx"],"names":["React","useState","useEffect","Toast","axiosInstance","NotificationToast","props","timestamp","Date","alert","notificationText","setNotificationText","notificationObject","setNotificationObject","showB","setShowB","toggleShowB","target_content_type","description","text","target_object_id","markasread","patch","id","unread","then","res","catch","err","console","log","width","toLocaleString"],"mappings":"qJAAA,OAASA,KAAT,CAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CAEA,MAAOC,CAAAA,KAAP,KAAkB,uBAAlB,CACA,MAAOC,CAAAA,aAAP,KAA0B,gBAA1B,C,wFAEA,cAAe,SAASC,CAAAA,iBAAT,CAA2BC,KAA3B,CAAkC,CAC/C,GAAIC,CAAAA,SAAS,CAAG,GAAIC,CAAAA,IAAJ,CAASF,KAAK,CAACG,KAAN,CAAYF,SAArB,CAAhB,CACA,cAAgDN,QAAQ,CAAC,EAAD,CAAxD,wCAAOS,gBAAP,eAAyBC,mBAAzB,eACA,eAAoDV,QAAQ,CAAC,EAAD,CAA5D,yCAAOW,kBAAP,eAA2BC,qBAA3B,eAEA,eAA0BZ,QAAQ,CAAC,IAAD,CAAlC,yCAAOa,KAAP,eAAcC,QAAd,eAEA,GAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,SAAMD,CAAAA,QAAQ,CAAC,CAACD,KAAF,CAAd,EAApB,CAEAZ,SAAS,CAAC,UAAM,gCACd,GAAI,eAAAI,KAAK,CAACG,KAAN,oDAAaQ,mBAAb,GAAoC,IAAxC,CAA8C,mBAC5CN,mBAAmB,gBAACL,KAAK,CAACG,KAAP,wCAAC,cAAaS,WAAd,CAAnB,CACAL,qBAAqB,CAAC,uBAAD,CAArB,CACD,CAHD,IAGO,IAAI,gBAAAP,KAAK,CAACG,KAAN,sDAAaQ,mBAAb,GAAoC,IAAxC,CAA8C,mBACnD,GAAME,CAAAA,IAAI,gBAAGb,KAAK,CAACG,KAAT,wCAAG,cAAaS,WAA1B,CACAP,mBAAmB,CAACQ,IAAD,CAAnB,CACAN,qBAAqB,uBAAgBP,KAAK,CAACG,KAAN,CAAYW,gBAA5B,EAArB,CACD,CAJM,IAIA,mBACL,GAAMD,CAAAA,KAAI,CAAG,2BAAb,CACAR,mBAAmB,gBAACL,KAAK,CAACG,KAAP,wCAAC,cAAaS,WAAd,CAAnB,CACAL,qBAAqB,CAAC,6BAAD,CAArB,CACD,CACF,CAbQ,CAaN,CAACJ,KAAD,CAbM,CAAT,CAeA,GAAMY,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,2BACjBjB,CAAAA,aAAa,CACVkB,KADH,kCACoBhB,KAAK,CAACG,KAD1B,wCACoB,cAAac,EADjC,MACwC,CACpCC,MAAM,CAAE,KAD4B,CADxC,EAIGC,IAJH,CAIQ,SAACC,GAAD,CAAS,CACbV,WAAW,GACZ,CANH,EAOGW,KAPH,CAOS,SAACC,GAAD,CAAS,CACdC,OAAO,CAACC,GAAR,CAAYF,GAAZ,EACD,CATH,CADiB,EAAnB,CAYA,mBACE,MAAC,KAAD,EACE,SAAS,CAAC,MADZ,CAEE,EAAE,CAAC,OAFL,CAGE,KAAK,CAAE,CAAEG,KAAK,CAAE,MAAT,CAHT,CAIE,OAAO,CAAEV,UAJX,CAKE,IAAI,CAAEP,KALR,wBAOE,MAAC,KAAD,CAAO,MAAP,yBACE,eAAQ,SAAS,CAAC,SAAlB,UAA6BF,kBAA7B,EADF,cAEE,uBAAQL,SAAS,CAACyB,cAAV,EAAR,EAFF,GAPF,cAWE,KAAC,KAAD,CAAO,IAAP,WAAatB,gBAAb,EAXF,GADF,CAeD","sourcesContent":["import { React, useState, useEffect } from \"react\";\n\nimport Toast from \"react-bootstrap/Toast\";\nimport axiosInstance from \"../../axiosApi\";\n\nexport default function NotificationToast(props) {\n  var timestamp = new Date(props.alert.timestamp);\n  const [notificationText, setNotificationText] = useState(\"\");\n  const [notificationObject, setNotificationObject] = useState(\"\");\n\n  const [showB, setShowB] = useState(true);\n\n  const toggleShowB = () => setShowB(!showB);\n\n  useEffect(() => {\n    if (props.alert?.target_content_type == \"10\") {\n      setNotificationText(props.alert?.description);\n      setNotificationObject(\"Partnerschaftsanfrage\");\n    } else if (props.alert?.target_content_type == \"11\") {\n      const text = props.alert?.description;\n      setNotificationText(text);\n      setNotificationObject(`Auftrags-ID ${props.alert.target_object_id}`);\n    } else {\n      const text = \"sonstige Benachrichtigung\";\n      setNotificationText(props.alert?.description);\n      setNotificationObject(\"Allgemeine Benachrichtigung\");\n    }\n  }, [alert]);\n\n  const markasread = () =>\n    axiosInstance\n      .patch(`/alerts/${props.alert?.id}/`, {\n        unread: false,\n      })\n      .then((res) => {\n        toggleShowB();\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n\n  return (\n    <Toast\n      className=\"mb-2\"\n      bg=\"light\"\n      style={{ width: \"100%\" }}\n      onClose={markasread}\n      show={showB}\n    >\n      <Toast.Header>\n        <strong className=\"me-auto\">{notificationObject}</strong>\n        <small>{timestamp.toLocaleString()}</small>\n      </Toast.Header>\n      <Toast.Body>{notificationText}</Toast.Body>\n    </Toast>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}