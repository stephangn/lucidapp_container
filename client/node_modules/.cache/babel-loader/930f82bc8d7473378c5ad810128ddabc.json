{"ast":null,"code":"var _jsxFileName = \"/Users/stephan/Dropbox/Entwicklung/webdev/projektstudium/client/src/pages/DocumentsNew.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport useAxiosPrivate from \"../hooks/useAxiosPrivate\";\nimport { MDBContainer, MDBBtn, MDBRow, MDBCol, MDBSpinner, MDBBadge, MDBCard, MDBCardHeader, MDBCardBody, MDBCardFooter } from \"mdb-react-ui-kit\";\nimport Divider from \"@mui/material/Divider\";\nimport DocumentsModal from \"../components/Documents/DocumentsModal\";\nimport ImporteurDocumentsModal from \"../components/Documents/ImporteurDocumentsModal\";\nimport DocumentTransaction from \"../components/Documents/DocumentTransaction\";\nimport DocumentCard from \"../components/Documents/DocumentCard\";\nimport DeclarationCard from \"../components/Documents/DeclarationCard\";\nimport DocumentBreadcrump from \"../components/Documents/DocumentBreadcrumb\";\nimport useAuth from \"../hooks/useAuth\";\nimport { rootShouldForwardProp } from \"@mui/material/styles/styled\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction DocumentsNew(props) {\n  _s();\n\n  // Allgemeine Auftragsinformationen\n  const [transactionData, setTransactionData] = useState([]); // Informationen der hochgeladenen Dokumente\n\n  const [documentsData, setDocumentsData] = useState([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const axiosInstance = useAxiosPrivate();\n  const [isImporteur, setIsImporteur] = useState(false);\n  const [isDeclaration, setIsDeclaration] = useState();\n  const [declarationData, setDeclarationData] = useState();\n  const [totalValue, setTotalValue] = useState(true);\n  const [invoiceData, setInvoiceData] = useState();\n  const [isInvoice, setIsInvoice] = useState(); // Anzahl Dokumente\n\n  const [numberInvoiceDocumentes, setNumberInvoiceDocuments] = useState(0);\n  const [numberOtherDocumentes, setNumberOtherDocuments] = useState(0); // State für \"Dokument hinzufügen\" Modal\n\n  const [addDocumentModal, setAddDocumentModal] = useState(false); // Funktion für Manipulation von Modal (als props weitergereicht)\n\n  function toggleAddDocumentModal() {\n    setAddDocumentModal(!addDocumentModal);\n  } // Speichern der Transaktions-ID aus URL\n\n\n  const {\n    transactionId\n  } = useParams();\n  const {\n    auth\n  } = useAuth();\n  useEffect(async () => {\n    await axiosInstance.get(`transactions/` + transactionId).then(res => {\n      //console.log(res.data);\n      setTransactionData(res.data);\n\n      if (auth.eori_nr == res.data.importeur) {\n        setIsImporteur(true);\n      }\n    });\n    console.log(transactionData);\n    await axiosInstance.get(`documents/?transaction=` + transactionId).then(res => {\n      //console.log(res.data);\n      setDocumentsData(res.data); //console.log(documentsData);\n    });\n    await axiosInstance.get(`declaration_auth/?transaction=` + transactionId).then(res => {\n      console.log(res.data.length);\n      axiosInstance.get('invoice/' + res.data[0].invoice.id + '/').then(resInvoice => {\n        setTotalValue(resInvoice.data.total_value); //console.log(res.data.total_value)\n\n        setInvoiceData(resInvoice.data);\n        setIsInvoice(true);\n      }).catch(err => {\n        console.log(\"Keine Rechnung vorhanden\");\n        setIsInvoice(false);\n      });\n\n      if (res.data.length > 0) {\n        console.log(\"Zollanmeldung liegt vor\");\n        setIsDeclaration(true);\n        setDeclarationData(res.data[0]);\n      }\n    }); //console.log(documentsData);\n\n    setIsLoading(false);\n  }, []); // Anzahl Rechnungs+Zolldokumente call(a) und sonstige Dokumente call(b)\n\n  function numberInvoiceDocuments(alternative) {\n    let invoiceAndCustoms = 0;\n    let other = 0;\n\n    for (let i = 0; i < documentsData.length; i++) {\n      if (documentsData[i].type == \"Rechnung\" || documentsData[i].type == \"Zoll\") {\n        invoiceAndCustoms += 1;\n      } else {\n        other += 1;\n      }\n    }\n\n    if (alternative == \"a\") {\n      return invoiceAndCustoms;\n    }\n\n    if (alternative == \"b\") {\n      return other;\n    }\n\n    return;\n  } // (Sonstige) Dokumente verifizieren Button\n\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: isLoading ? /*#__PURE__*/_jsxDEV(MDBSpinner, {\n      grow: true,\n      children: /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"visually-hidden\",\n        children: \"L\\xE4dt..\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(MDBContainer, {\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Dokumente (neu)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 11\n      }, this), isImporteur == true ? /*#__PURE__*/_jsxDEV(ImporteurDocumentsModal, {\n        basicModal: addDocumentModal,\n        setBasicModal: setAddDocumentModal,\n        toggleShow: toggleAddDocumentModal,\n        transactionData: transactionData\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 13\n      }, this) : /*#__PURE__*/_jsxDEV(DocumentsModal, {\n        basicModal: addDocumentModal,\n        setBasicModal: setAddDocumentModal,\n        toggleShow: toggleAddDocumentModal,\n        transactionData: transactionData\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(DocumentBreadcrump, {\n        transactionId: transactionId\n      }, transactionId, false, {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(DocumentTransaction, {\n        description: transactionData.description,\n        dateAdded: transactionData.date_added,\n        dateProcessed: transactionData.date_processed,\n        status: transactionData.status,\n        street: transactionData.partnership.partner.street,\n        cityCode: transactionData.partnership.partner.city_code,\n        countryCode: transactionData.partnership.partner.country_code,\n        city: transactionData.partnership.partner.city,\n        name: transactionData.partnership.partner.name,\n        id: transactionData.id,\n        blockchain_rid: transactionData.blockchain_id,\n        transactionData: transactionData,\n        isImporteur: isImporteur\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"nav\", {\n        className: \"my-3 navbar navbar-expand-lg navbar-light bg-light\",\n        children: /*#__PURE__*/_jsxDEV(MDBContainer, {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [isDeclaration ? /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(MDBBadge, {\n                pill: true,\n                children: 1\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 175,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"b\", {\n                children: \"Zollanmeldung\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 175,\n                columnNumber: 48\n              }, this)]\n            }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(MDBBadge, {\n                pill: true,\n                children: 0\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 176,\n                columnNumber: 22\n              }, this), /*#__PURE__*/_jsxDEV(\"b\", {\n                children: \"Zollanmeldung\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 176,\n                columnNumber: 51\n              }, this)]\n            }, void 0, true), /*#__PURE__*/_jsxDEV(MDBBadge, {\n              pill: true,\n              className: \"ms-3\",\n              children: numberInvoiceDocuments(\"a\")\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 177,\n              columnNumber: 17\n            }, this), \" \", /*#__PURE__*/_jsxDEV(\"b\", {\n              children: \"Rechnungsdokumente\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 180,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(MDBBadge, {\n              pill: true,\n              className: \"ms-3\",\n              children: numberInvoiceDocuments(\"b\")\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 181,\n              columnNumber: 17\n            }, this), \" \", /*#__PURE__*/_jsxDEV(\"b\", {\n              children: \"Sonstige Dokumente\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 184,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 173,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(MDBBtn, {\n            outline: true,\n            className: \"float-end\",\n            color: \"success\",\n            onClick: toggleAddDocumentModal,\n            children: \"Dokument hinzuf\\xFCgen\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 186,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 11\n      }, this), isDeclaration && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(Divider, {\n          textAlign: \"left\",\n          className: \"mb-4\",\n          children: /*#__PURE__*/_jsxDEV(\"h5\", {\n            children: \"Zollanmeldung\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 202,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 200,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(DeclarationCard, {\n          anmeldeArt: declarationData.anmeldeArt,\n          gesamtbetrag: totalValue,\n          bearbeitendeDienststelle: declarationData.customs_office.name,\n          lieferkosten: declarationData.invoice.transport_costs,\n          documentId: documentsData.documentId,\n          anmelderName: declarationData.importeur.name,\n          issue_date: declarationData.date_added\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true), /*#__PURE__*/_jsxDEV(Divider, {\n        textAlign: \"left\",\n        className: \"mt-5 mb-4\",\n        children: /*#__PURE__*/_jsxDEV(\"h5\", {\n          children: \"Rechnungsdokumente\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 215,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(MDBRow, {\n        className: \"row-cols-1 row-cols-md-2 row-cols-lg-3 g-4\",\n        children: documentsData.map(documentData => documentData.type == \"Rechnung\" && /*#__PURE__*/_jsxDEV(React.Fragment, {\n          children: /*#__PURE__*/_jsxDEV(MDBCol, {\n            children: /*#__PURE__*/_jsxDEV(DocumentCard, {\n              id: documentData.id,\n              author_company: documentData.owner.employee.company.name,\n              author: documentData.owner.username,\n              type: documentData.type,\n              description: documentData.description,\n              documentDate: documentData.issue_date,\n              uploadDate: documentData.upload_date,\n              blockchain_did: documentData.blockchain_did,\n              file: documentData.file,\n              confirmed: documentData.confirmed\n            }, documentData.id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 223,\n              columnNumber: 23\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 222,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 221,\n          columnNumber: 19\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Divider, {\n        textAlign: \"left\",\n        className: \"mt-5 mb-4\",\n        children: /*#__PURE__*/_jsxDEV(\"h5\", {\n          children: \"Sonstige Dokumente\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 247,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(MDBRow, {\n        className: \"row-cols-1 row-cols-md-2 row-cols-lg-3 g-4\",\n        children: documentsData.map(documentData => documentData.type !== \"Rechnung\" && /*#__PURE__*/_jsxDEV(React.Fragment, {\n          children: /*#__PURE__*/_jsxDEV(MDBCol, {\n            children: /*#__PURE__*/_jsxDEV(DocumentCard, {\n              id: documentData.id,\n              author: documentData.author,\n              type: documentData.type,\n              description: documentData.description,\n              documentDate: documentData.issue_date,\n              uploadDate: documentData.upload_date,\n              file: documentData.file,\n              confirmed: documentData.confirmed,\n              blockchain_did: documentData.blockchain_id\n            }, documentData.id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 255,\n              columnNumber: 23\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 254,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 253,\n          columnNumber: 19\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 249,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 9\n    }, this)\n  }, void 0, false);\n}\n\n_s(DocumentsNew, \"34Abhn5VrDAR8TIb6F8uVELcuj4=\", false, function () {\n  return [useAxiosPrivate, useParams, useAuth];\n});\n\n_c = DocumentsNew;\nexport default DocumentsNew;\n\nvar _c;\n\n$RefreshReg$(_c, \"DocumentsNew\");","map":{"version":3,"sources":["/Users/stephan/Dropbox/Entwicklung/webdev/projektstudium/client/src/pages/DocumentsNew.jsx"],"names":["React","useEffect","useState","useParams","useAxiosPrivate","MDBContainer","MDBBtn","MDBRow","MDBCol","MDBSpinner","MDBBadge","MDBCard","MDBCardHeader","MDBCardBody","MDBCardFooter","Divider","DocumentsModal","ImporteurDocumentsModal","DocumentTransaction","DocumentCard","DeclarationCard","DocumentBreadcrump","useAuth","rootShouldForwardProp","DocumentsNew","props","transactionData","setTransactionData","documentsData","setDocumentsData","isLoading","setIsLoading","axiosInstance","isImporteur","setIsImporteur","isDeclaration","setIsDeclaration","declarationData","setDeclarationData","totalValue","setTotalValue","invoiceData","setInvoiceData","isInvoice","setIsInvoice","numberInvoiceDocumentes","setNumberInvoiceDocuments","numberOtherDocumentes","setNumberOtherDocuments","addDocumentModal","setAddDocumentModal","toggleAddDocumentModal","transactionId","auth","get","then","res","data","eori_nr","importeur","console","log","length","invoice","id","resInvoice","total_value","catch","err","numberInvoiceDocuments","alternative","invoiceAndCustoms","other","i","type","description","date_added","date_processed","status","partnership","partner","street","city_code","country_code","city","name","blockchain_id","anmeldeArt","customs_office","transport_costs","documentId","map","documentData","owner","employee","company","username","issue_date","upload_date","blockchain_did","file","confirmed","author"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport useAxiosPrivate from \"../hooks/useAxiosPrivate\";\nimport {\n  MDBContainer,\n  MDBBtn,\n  MDBRow,\n  MDBCol,\n  MDBSpinner,\n  MDBBadge,\n  MDBCard,\n  MDBCardHeader,\n  MDBCardBody,\n  MDBCardFooter,\n} from \"mdb-react-ui-kit\";\nimport Divider from \"@mui/material/Divider\";\n\nimport DocumentsModal from \"../components/Documents/DocumentsModal\";\nimport ImporteurDocumentsModal from \"../components/Documents/ImporteurDocumentsModal\";\nimport DocumentTransaction from \"../components/Documents/DocumentTransaction\";\nimport DocumentCard from \"../components/Documents/DocumentCard\";\nimport DeclarationCard from \"../components/Documents/DeclarationCard\";\nimport DocumentBreadcrump from \"../components/Documents/DocumentBreadcrumb\";\nimport useAuth from \"../hooks/useAuth\";\nimport { rootShouldForwardProp } from \"@mui/material/styles/styled\";\n\nfunction DocumentsNew(props) {\n  // Allgemeine Auftragsinformationen\n  const [transactionData, setTransactionData] = useState([]);\n\n  // Informationen der hochgeladenen Dokumente\n  const [documentsData, setDocumentsData] = useState([]);\n\n  const [isLoading, setIsLoading] = useState(true);\n\n  const axiosInstance = useAxiosPrivate();\n\n  const [isImporteur, setIsImporteur] = useState(false);\n\n  const [isDeclaration, setIsDeclaration] = useState()\n  const [declarationData, setDeclarationData] = useState()\n  const [totalValue, setTotalValue] = useState(true);\n  const [invoiceData, setInvoiceData] = useState()\n  const [isInvoice, setIsInvoice] = useState()\n\n  // Anzahl Dokumente\n  const [numberInvoiceDocumentes, setNumberInvoiceDocuments] = useState(0);\n  const [numberOtherDocumentes, setNumberOtherDocuments] = useState(0);\n\n  // State für \"Dokument hinzufügen\" Modal\n  const [addDocumentModal, setAddDocumentModal] = useState(false);\n  // Funktion für Manipulation von Modal (als props weitergereicht)\n  function toggleAddDocumentModal() {\n    setAddDocumentModal(!addDocumentModal);\n  }\n\n  // Speichern der Transaktions-ID aus URL\n  const { transactionId } = useParams();\n  const { auth } = useAuth();\n\n  useEffect(async () => {\n    await axiosInstance.get(`transactions/` + transactionId).then((res) => {\n      //console.log(res.data);\n      setTransactionData(res.data);\n      if (auth.eori_nr == res.data.importeur) {\n        setIsImporteur(true);\n      }\n    });\n    console.log(transactionData);\n    await axiosInstance.get(`documents/?transaction=` + transactionId).then((res) => {\n      //console.log(res.data);\n      setDocumentsData(res.data);\n      //console.log(documentsData);\n    });\n\n    await axiosInstance.get(`declaration_auth/?transaction=` + transactionId).then((res) => {\n      console.log(res.data.length);\n      axiosInstance.get('invoice/' + res.data[0].invoice.id + '/').then((resInvoice) => {\n        setTotalValue(resInvoice.data.total_value)\n        //console.log(res.data.total_value)\n        setInvoiceData(resInvoice.data)\n        setIsInvoice(true)\n      }).catch((err) => {\n        console.log(\"Keine Rechnung vorhanden\")\n        setIsInvoice(false)\n      })\n      if (res.data.length > 0) {\n        console.log(\"Zollanmeldung liegt vor\")\n        setIsDeclaration(true)\n        setDeclarationData(res.data[0])\n        \n      } });\n      //console.log(documentsData);\n\n    setIsLoading(false);\n\n  }, []);\n\n  // Anzahl Rechnungs+Zolldokumente call(a) und sonstige Dokumente call(b)\n  function numberInvoiceDocuments(alternative) {\n    let invoiceAndCustoms = 0;\n    let other = 0;\n    for (let i = 0; i < documentsData.length; i++) {\n      if (\n        documentsData[i].type == \"Rechnung\" ||\n        documentsData[i].type == \"Zoll\"\n      ) {\n        invoiceAndCustoms += 1;\n      } else {\n        other += 1;\n      }\n    }\n    if (alternative == \"a\") {\n      return invoiceAndCustoms;\n    }\n    if (alternative == \"b\") {\n      return other;\n    }\n    return;\n  }\n\n  // (Sonstige) Dokumente verifizieren Button\n\n\n  return (\n    <>\n      {isLoading ? (\n        <MDBSpinner grow>\n          <span className=\"visually-hidden\">Lädt..</span>\n        </MDBSpinner>\n      ) : (\n        <MDBContainer>\n          <h3>Dokumente (neu)</h3>\n          {isImporteur == true ? (\n            <ImporteurDocumentsModal\n              basicModal={addDocumentModal}\n              setBasicModal={setAddDocumentModal}\n              toggleShow={toggleAddDocumentModal}\n              transactionData={transactionData}\n            />\n          ) : (\n            <DocumentsModal\n              basicModal={addDocumentModal}\n              setBasicModal={setAddDocumentModal}\n              toggleShow={toggleAddDocumentModal}\n              transactionData={transactionData}\n            />\n          )}\n\n          <DocumentBreadcrump\n            key={transactionId}\n            transactionId={transactionId}\n          />\n          <DocumentTransaction\n            description={transactionData.description}\n            dateAdded={transactionData.date_added}\n            dateProcessed={transactionData.date_processed}\n            status={transactionData.status}\n            street={transactionData.partnership.partner.street}\n            cityCode={transactionData.partnership.partner.city_code}\n            countryCode={transactionData.partnership.partner.country_code}\n            city={transactionData.partnership.partner.city}\n            name={transactionData.partnership.partner.name}\n            id={transactionData.id}\n            blockchain_rid={transactionData.blockchain_id}\n            transactionData={transactionData}\n            isImporteur={isImporteur}\n          />\n\n          {/* Navleiste mit Anzahl der Dokumente */}\n          <nav className=\"my-3 navbar navbar-expand-lg navbar-light bg-light\">\n            <MDBContainer>\n              <div>\n                {isDeclaration ? (\n                <><MDBBadge pill>{1}</MDBBadge><b>Zollanmeldung</b></>\n                ):(<><MDBBadge pill>{0}</MDBBadge><b>Zollanmeldung</b></>)}\n                <MDBBadge pill className=\"ms-3\">\n                  {numberInvoiceDocuments(\"a\")}\n                </MDBBadge>{\" \"}\n                <b>Rechnungsdokumente</b>\n                <MDBBadge pill className=\"ms-3\">\n                  {numberInvoiceDocuments(\"b\")}\n                </MDBBadge>{\" \"}\n                <b>Sonstige Dokumente</b>\n              </div>\n              <MDBBtn\n                outline\n                className=\"float-end\"\n                color=\"success\"\n                onClick={toggleAddDocumentModal}\n              >\n                Dokument hinzufügen\n              </MDBBtn>\n            </MDBContainer>\n          </nav>\n\n          {/* Auflistung der Rechnungsdokumente */}\n          {isDeclaration && \n\n          <><Divider textAlign=\"left\" className=\"mb-4\">\n\n                <h5>Zollanmeldung</h5>\n              </Divider><DeclarationCard\n                  anmeldeArt ={declarationData.anmeldeArt}\n                  gesamtbetrag ={totalValue}\n                  bearbeitendeDienststelle ={declarationData.customs_office.name}\n                  lieferkosten ={declarationData.invoice.transport_costs}\n                  documentId={documentsData.documentId}\n                  anmelderName = {declarationData.importeur.name}\n                  issue_date = {declarationData.date_added}\n                  \n                  /></>\n          }\n          <Divider textAlign=\"left\" className=\"mt-5 mb-4\">\n            <h5>Rechnungsdokumente</h5>\n          </Divider>\n          <MDBRow className=\"row-cols-1 row-cols-md-2 row-cols-lg-3 g-4\">\n            {documentsData.map(\n              (documentData) =>\n                documentData.type == \"Rechnung\" && (\n                  <React.Fragment>\n                    <MDBCol>\n                      <DocumentCard\n                        key={documentData.id}\n                        id={documentData.id}\n                        author_company={\n                          documentData.owner.employee.company.name\n                        }\n                        author={documentData.owner.username}\n                        type={documentData.type}\n                        description={documentData.description}\n                        documentDate={documentData.issue_date}\n                        uploadDate={documentData.upload_date}\n                        blockchain_did = {documentData.blockchain_did}\n                        file={documentData.file}\n                        confirmed={documentData.confirmed}\n                      />\n                    </MDBCol>\n                  </React.Fragment>\n                )\n            )}\n          </MDBRow>\n\n          {/* Auflistung der sontigen Dokumente */}\n\n          <Divider textAlign=\"left\" className=\"mt-5 mb-4\">\n            <h5>Sonstige Dokumente</h5>\n          </Divider>\n          <MDBRow className=\"row-cols-1 row-cols-md-2 row-cols-lg-3 g-4\">\n            {documentsData.map(\n              (documentData) =>\n                documentData.type !== \"Rechnung\" && (\n                  <React.Fragment>\n                    <MDBCol>\n                      <DocumentCard\n                        key={documentData.id}\n                        id={documentData.id}\n                        author={documentData.author}\n                        type={documentData.type}\n                        description={documentData.description}\n                        documentDate={documentData.issue_date}\n                        uploadDate={documentData.upload_date}\n                        file={documentData.file}\n                        confirmed={documentData.confirmed}\n                        blockchain_did={documentData.blockchain_id}\n                      />\n                    </MDBCol>\n                  </React.Fragment>\n                )\n            )}\n          </MDBRow>\n        </MDBContainer>\n      )}\n    </>\n  );\n}\n\nexport default DocumentsNew;\n"]},"metadata":{},"sourceType":"module"}