{"ast":null,"code":"import _objectSpread from\"/Users/stephan/Dropbox/Entwicklung/webdev/projektstudium/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/stephan/Dropbox/Entwicklung/webdev/projektstudium/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import{MDBContainer,MDBRow,MDBCol,MDBInput,MDBBtn,MDBIcon}from\"mdb-react-ui-kit\";import useAxiosPrivate from\"../../hooks/useAxiosPrivate\";import Autocomplete from\"@mui/material/Autocomplete\";import TextField from\"@mui/material/TextField\";import Checkbox from\"@mui/material/Checkbox\";import FormControlLabel from\"@mui/material/FormControlLabel\";import{Link}from\"react-router-dom\";import useAuth from\"../../hooks/useAuth\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function TransactionForm(props){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),checkImporteur=_useState2[0],setCheckImporteur=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),description=_useState4[0],setDescription=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),partnership=_useState6[0],setPartnership=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),partners=_useState8[0],setPartners=_useState8[1];var _useState9=useState(),_useState10=_slicedToArray(_useState9,2),partnerCompany=_useState10[0],setPartnerCompany=_useState10[1];var axiosPrivate=useAxiosPrivate();var _useAuth=useAuth(),auth=_useAuth.auth;useEffect(function(){//lookup partner for checkbox\naxiosPrivate.get(\"partnership/\").then(function(res){setPartners(res.data);});},[]);// Datenbank Submit\nfunction handleSubmit(e){var importeur=1;if(checkImporteur){importeur=auth.eori_nr;//console.log(\"Importeur ist eigene Firma\");\n}else{importeur=partnerCompany;}//console.log(\"Die Importfirma ist\", importeur);\ne.preventDefault();var newTransaction={description:description,partnership:partnership,importeur:importeur};//add transaction\naxiosPrivate.post(\"/transactions/\",newTransaction).then(function(res){props.setreload(!props.reload);// Modal schließen\nprops.toggleShow();// Snackbar Alert setzen\nprops.setSnackbarSuccess(true);props.setSnackbarMessage(\"Transaktion erfolgreich angelegt.\");props.handleOpenSnackbar();}).catch(function(error){console.error(\"There was an error!\",error);// Modal schließen\nprops.toggleShow();// Snackbar Alert setzen\nprops.setSnackbarSuccess(false);props.setSnackbarMessage(\"Fehler beim anlegen der Transaktion.\");props.handleOpenSnackbar();});}return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"form\",{onSubmit:handleSubmit,children:/*#__PURE__*/_jsxs(MDBContainer,{children:[/*#__PURE__*/_jsx(MDBRow,{children:/*#__PURE__*/_jsx(MDBInput,{name:\"description\",label:\"Beschreibung der Transaktion\",type:\"text\",onChange:function onChange(e){return setDescription(e.target.value);}})}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-4\",children:\"Partner ausw\\xE4hlen:\"}),/*#__PURE__*/_jsxs(MDBRow,{children:[/*#__PURE__*/_jsx(MDBCol,{children:/*#__PURE__*/_jsx(Autocomplete,{className:\"mt-1\",disablePortal:true,id:\"combo-box-partner\",options:partners//choose name as label for ui\n,getOptionLabel:function getOptionLabel(option){return option.partner.name;}//when changed, save choosen Partner\n,onChange:function onChange(event,value){setPartnership(value.id);setPartnerCompany(value.partner.eori_nr);},sx:{width:320},renderInput:function renderInput(params){return/*#__PURE__*/_jsx(TextField,_objectSpread(_objectSpread({},params),{},{label:\"Partner\"}));}})}),/*#__PURE__*/_jsx(MDBCol,{children:/*#__PURE__*/_jsx(Link,{to:\"/partners\",children:/*#__PURE__*/_jsx(MDBIcon,{far:true,icon:\"address-book\",className:\"float-end mt-3 me-4\",size:\"2x\"})})})]}),/*#__PURE__*/_jsx(MDBRow,{children:/*#__PURE__*/_jsx(FormControlLabel,{className:\"mt-3\",control:/*#__PURE__*/_jsx(Checkbox,{onClick:function onClick(){return setCheckImporteur(!checkImporteur);}}),label:\"Ist ihre Firma der Importeur?\"})}),description==\"\"||partnership==\"\"?/*#__PURE__*/_jsx(MDBBtn,{disabled:true,block:true,type:\"submit\",color:\"success\",className:\"mt-4\",children:\"Hinzuf\\xFCgen\"}):/*#__PURE__*/_jsx(MDBBtn,{block:true,type:\"submit\",color:\"success\",className:\"mt-4\",children:\"Hinzuf\\xFCgen\"})]})})});}export default TransactionForm;","map":{"version":3,"sources":["/Users/stephan/Dropbox/Entwicklung/webdev/projektstudium/client/src/components/Transactions/TransactionForm.jsx"],"names":["React","useEffect","useState","MDBContainer","MDBRow","MDBCol","MDBInput","MDBBtn","MDBIcon","useAxiosPrivate","Autocomplete","TextField","Checkbox","FormControlLabel","Link","useAuth","TransactionForm","props","checkImporteur","setCheckImporteur","description","setDescription","partnership","setPartnership","partners","setPartners","partnerCompany","setPartnerCompany","axiosPrivate","auth","get","then","res","data","handleSubmit","e","importeur","eori_nr","preventDefault","newTransaction","post","setreload","reload","toggleShow","setSnackbarSuccess","setSnackbarMessage","handleOpenSnackbar","catch","error","console","target","value","option","partner","name","event","id","width","params"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport {\n  MDBContainer,\n  MDBRow,\n  MDBCol,\n  MDBInput,\n  MDBBtn,\n  MDBIcon,\n} from \"mdb-react-ui-kit\";\nimport useAxiosPrivate from \"../../hooks/useAxiosPrivate\";\nimport Autocomplete from \"@mui/material/Autocomplete\";\nimport TextField from \"@mui/material/TextField\";\nimport Checkbox from \"@mui/material/Checkbox\";\nimport FormControlLabel from \"@mui/material/FormControlLabel\";\nimport { Link } from \"react-router-dom\";\nimport useAuth from \"../../hooks/useAuth\";\n\nfunction TransactionForm(props) {\n  const [checkImporteur, setCheckImporteur] = useState(false);\n  const [description, setDescription] = useState(\"\");\n  const [partnership, setPartnership] = useState(\"\");\n  const [partners, setPartners] = useState([]);\n  const [partnerCompany, setPartnerCompany] = useState();\n  const axiosPrivate = useAxiosPrivate();\n  const { auth } = useAuth();\n\n  useEffect(() => {\n    //lookup partner for checkbox\n    axiosPrivate.get(\"partnership/\").then((res) => {\n      setPartners(res.data);\n    });\n  }, []);\n\n  // Datenbank Submit\n  function handleSubmit(e) {\n    let importeur = 1;\n    if (checkImporteur) {\n      importeur = auth.eori_nr;\n      //console.log(\"Importeur ist eigene Firma\");\n    } else {\n      importeur = partnerCompany;\n    }\n    //console.log(\"Die Importfirma ist\", importeur);\n    e.preventDefault();\n    const newTransaction = {\n      description,\n      partnership,\n      importeur,\n    };\n    //add transaction\n    axiosPrivate\n      .post(\"/transactions/\", newTransaction)\n      .then((res) => {\n        props.setreload(!props.reload);\n        // Modal schließen\n        props.toggleShow();\n        // Snackbar Alert setzen\n        props.setSnackbarSuccess(true);\n        props.setSnackbarMessage(\"Transaktion erfolgreich angelegt.\");\n        props.handleOpenSnackbar();\n      })\n      .catch((error) => {\n        console.error(\"There was an error!\", error);\n        // Modal schließen\n        props.toggleShow();\n        // Snackbar Alert setzen\n        props.setSnackbarSuccess(false);\n        props.setSnackbarMessage(\"Fehler beim anlegen der Transaktion.\");\n        props.handleOpenSnackbar();\n      });\n  }\n\n  return (\n    <>\n      <form onSubmit={handleSubmit}>\n        <MDBContainer>\n          <MDBRow>\n            <MDBInput\n              name=\"description\"\n              label=\"Beschreibung der Transaktion\"\n              type=\"text\"\n              onChange={(e) => setDescription(e.target.value)}\n            />\n          </MDBRow>\n          <div className=\"mt-4\">Partner auswählen:</div>\n          <MDBRow>\n            <MDBCol>\n              <Autocomplete\n                className=\"mt-1\"\n                disablePortal\n                id=\"combo-box-partner\"\n                options={partners}\n                //choose name as label for ui\n                getOptionLabel={(option) => option.partner.name}\n                //when changed, save choosen Partner\n                onChange={(event, value) => {\n                  setPartnership(value.id);\n                  setPartnerCompany(value.partner.eori_nr);\n                }}\n                sx={{ width: 320 }}\n                renderInput={(params) => (\n                  <TextField {...params} label=\"Partner\" />\n                )}\n              />\n            </MDBCol>\n            <MDBCol>\n              <Link to=\"/partners\">\n                <MDBIcon\n                  far\n                  icon=\"address-book\"\n                  className=\"float-end mt-3 me-4\"\n                  size=\"2x\"\n                />\n              </Link>\n            </MDBCol>\n          </MDBRow>\n\n          <MDBRow>\n            <FormControlLabel\n              className=\"mt-3\"\n              control={\n                <Checkbox onClick={() => setCheckImporteur(!checkImporteur)} />\n              }\n              label=\"Ist ihre Firma der Importeur?\"\n            />\n          </MDBRow>\n          {description == \"\" || partnership == \"\" ? (\n            <MDBBtn\n              disabled\n              block\n              type=\"submit\"\n              color=\"success\"\n              className=\"mt-4\"\n            >\n              Hinzufügen\n            </MDBBtn>\n          ) : (\n            <MDBBtn block type=\"submit\" color=\"success\" className=\"mt-4\">\n              Hinzufügen\n            </MDBBtn>\n          )}\n        </MDBContainer>\n      </form>\n    </>\n  );\n}\n\nexport default TransactionForm;\n"]},"metadata":{},"sourceType":"module"}