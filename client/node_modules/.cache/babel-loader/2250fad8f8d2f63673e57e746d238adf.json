{"ast":null,"code":"var _jsxFileName = \"/Users/stephan/Dropbox/Entwicklung/webdev/projektstudium/client/src/components/ZollDocuments/ZollDocumentTransaction.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport { MDBBtn, MDBCard, MDBCardBody, MDBCardTitle, MDBCardFooter, MDBCardSubTitle, MDBCardText, MDBCol, MDBContainer, MDBRow, MDBPopover, MDBPopoverBody } from \"mdb-react-ui-kit\";\nimport { Link } from \"react-router-dom\";\nimport { getZollanmeldung } from \"../../Web3Client.js\";\nimport useAxiosPrivate from \"../../hooks/useAxiosPrivate.js\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction abgleichBlockchain(_blockchain_zid) {\n  var crypto = require('crypto');\n\n  getZollanmeldung(_blockchain_zid).then(tx => {\n    console.log(tx); // if(tx[0].gesamtbetrag==props.declarationData.invoice.total_value\n    //   && tx[0].zollwert== (props.declarationData.invoice.transport_costs + props.declarationData.invoice.total_value)\n    //   && tx[0].lieferkosten== props.declarationData.invoice.transport_costs\n    //   && tx[0].incoterms== props.declarationData.invoice.lieferbedingung\n    //   && tx[0].exporteur== props.declarationData.exporteur.publickey\n    //   && tx[0].importeur== props.declarationData.importeur.publickey\n    //   && tx[0].zoll== props.declarationData.customs_office.publickey\n    //   && tx[0].anmelder== props.declarationData.importeur.publickey\n    //   && tx[1].gesamtbetrag== props.declarationData.invoice.total_value\n    //   && tx[1].waehrung== props.declarationData.invoice.total_value\n    //   && tx[1].exporteur== props.declarationData.exporteur.publickey\n    //   && tx[1].importeur== props.declarationData.importeur.publickey\n    //   && tx[1].datum== props.declarationData.invoice.issue_date\n    //   && tx[1].rechnungsposten== crypto.createHash('sha512').update(props.declarationData.invoice.invoiceItems).digest('hex')\n    //   && tx[1].lieferkosten== props.declarationData.invoice.transport_costs\n    //   ){\n    //     return true;\n    // }\n    // else{return false;}\n  }).catch(err => {\n    console.log(err);\n  });\n}\n\nfunction ZollDocumentTransaction(props) {\n  _s();\n\n  const axiosInstance = useAxiosPrivate();\n  const [isVerified, setIsVerified] = useState(false);\n  useEffect(() => {\n    if (props.declarationData.status != \"PE\") {\n      setIsVerified(true);\n    }\n  }, []);\n\n  function handleVerification() {\n    //axiosInstance.patch('declaration_auth/' + props.declarationData.id + '/', {'status': 'VF'})\n    //setIsVerified(true)\n    const abgleichBlockchain = abgleichBlockchain();\n    console.log(abgleichBlockchain);\n\n    if (abgleichBlockchain == true) {//event Haken erscheint\n    }\n  }\n\n  function handleConfirmation() {\n    axiosInstance.patch('declaration_auth/' + props.declarationData.id + '/', {\n      'status': 'AC'\n    });\n  }\n\n  function handleReject() {\n    axiosInstance.patch('declaration_auth/' + props.declarationData.id + '/', {\n      'status': 'RJ'\n    });\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(MDBCard, {\n      children: /*#__PURE__*/_jsxDEV(MDBCardBody, {\n        children: [/*#__PURE__*/_jsxDEV(MDBContainer, {\n          children: [/*#__PURE__*/_jsxDEV(MDBRow, {\n            children: /*#__PURE__*/_jsxDEV(MDBCol, {\n              children: /*#__PURE__*/_jsxDEV(MDBCardTitle, {\n                children: props.declarationData.transaction.description\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 96,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 95,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(MDBContainer, {\n          children: [/*#__PURE__*/_jsxDEV(MDBRow, {\n            children: [/*#__PURE__*/_jsxDEV(MDBCol, {\n              children: /*#__PURE__*/_jsxDEV(MDBCardText, {\n                children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                  children: \"Versender\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 105,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 106,\n                  columnNumber: 19\n                }, this), props.declarationData.exporteur.name, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 108,\n                  columnNumber: 19\n                }, this), props.declarationData.exporteur.street, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 110,\n                  columnNumber: 19\n                }, this), props.declarationData.exporteur.city_code, \" \", props.declarationData.exporteur.city, \", \", props.declarationData.exporteur.country_code]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 104,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 103,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(MDBCol, {\n              children: /*#__PURE__*/_jsxDEV(MDBCardText, {\n                children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                  children: \"Empf\\xE4nger / Anmelder\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 116,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 117,\n                  columnNumber: 19\n                }, this), props.declarationData.importeur.name, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 119,\n                  columnNumber: 19\n                }, this), props.declarationData.importeur.street, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 121,\n                  columnNumber: 19\n                }, this), props.declarationData.importeur.city_code, \" \", props.declarationData.importeur.city, \", \", props.declarationData.importeur.country_code]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 115,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 114,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(MDBCol, {\n              children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                children: \"Anzahl Dokumente: \"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 126,\n                columnNumber: 17\n              }, this), props.numberDocuments, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 128,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 129,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"b\", {\n                children: \"Verifikation: \"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 130,\n                columnNumber: 17\n              }, this), \"Ausstehend (STATISCH)\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 131,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"b\", {\n                children: \"Zollbescheid: \"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 132,\n                columnNumber: 17\n              }, this), \"Ausstehend (STATISCH)\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 125,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(MDBRow, {\n            children: [/*#__PURE__*/_jsxDEV(MDBCol, {\n              md: \"8\",\n              lg: \"9\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"alert alert-warning\",\n                role: \"alert\",\n                children: [\"Status: \", props.declarationData.status]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 138,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 137,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(MDBCol, {\n              md: \"4\",\n              lg: \"3\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"float-end\",\n                children: isVerified ? /*#__PURE__*/_jsxDEV(MDBBtn, {\n                  className: \"my-3\",\n                  children: \"Daten sind verifiziert\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 145,\n                  columnNumber: 23\n                }, this) : /*#__PURE__*/_jsxDEV(MDBBtn, {\n                  onClick: () => handleVerification(),\n                  className: \"my-3\",\n                  children: \"Daten verifizieren\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 148,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 143,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 142,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 136,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(MDBRow, {\n            children: [/*#__PURE__*/_jsxDEV(MDBBtn, {\n              className: \"mx-3 mb-3\",\n              color: \"success\",\n              style: {\n                width: 300\n              },\n              onClick: () => handleConfirmation(),\n              disabled: true,\n              children: \"Anmeldung Best\\xE4tigen\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 156,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(MDBBtn, {\n              color: \"danger\",\n              className: \"mx-3 mb-3\",\n              style: {\n                width: 300\n              },\n              disabled: true,\n              onClick: () => handleReject(),\n              children: \"Anmeldung Ablehnen\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 165,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 155,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(MDBCardFooter, {\n          children: /*#__PURE__*/_jsxDEV(MDBRow, {\n            children: [/*#__PURE__*/_jsxDEV(MDBCol, {\n              md: \"4\",\n              children: [\"Hinzugef\\xFCgt: \", props.declarationData.transaction.date_added]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 178,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(MDBCol, {\n              md: \"4\",\n              children: [\"Zuletzt aktualisiert: \", props.declarationData.transaction.date_processed]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 179,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 177,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 90,\n    columnNumber: 5\n  }, this);\n}\n\n_s(ZollDocumentTransaction, \"Lx1m6TDv59HwpYzN6CHqB/aYyLw=\", false, function () {\n  return [useAxiosPrivate];\n});\n\n_c = ZollDocumentTransaction;\nexport default ZollDocumentTransaction;\n\nvar _c;\n\n$RefreshReg$(_c, \"ZollDocumentTransaction\");","map":{"version":3,"sources":["/Users/stephan/Dropbox/Entwicklung/webdev/projektstudium/client/src/components/ZollDocuments/ZollDocumentTransaction.jsx"],"names":["React","useEffect","useState","MDBBtn","MDBCard","MDBCardBody","MDBCardTitle","MDBCardFooter","MDBCardSubTitle","MDBCardText","MDBCol","MDBContainer","MDBRow","MDBPopover","MDBPopoverBody","Link","getZollanmeldung","useAxiosPrivate","axios","abgleichBlockchain","_blockchain_zid","crypto","require","then","tx","console","log","catch","err","ZollDocumentTransaction","props","axiosInstance","isVerified","setIsVerified","declarationData","status","handleVerification","handleConfirmation","patch","id","handleReject","transaction","description","exporteur","name","street","city_code","city","country_code","importeur","numberDocuments","width","date_added","date_processed"],"mappings":"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","sourcesContent":["import React, {useEffect, useState} from \"react\";\nimport {\n  MDBBtn,\n  MDBCard,\n  MDBCardBody,\n  MDBCardTitle,\n  MDBCardFooter,\n  MDBCardSubTitle,\n  MDBCardText,\n  MDBCol,\n  MDBContainer,\n  MDBRow,\n  MDBPopover,\n  MDBPopoverBody,\n} from \"mdb-react-ui-kit\";\nimport { Link } from \"react-router-dom\";\nimport { getZollanmeldung } from \"../../Web3Client.js\";\nimport useAxiosPrivate from \"../../hooks/useAxiosPrivate.js\";\nimport axios from \"axios\";\n\n\nfunction abgleichBlockchain(_blockchain_zid) {\n\n  var crypto = require('crypto');  \n  \n\n  getZollanmeldung(_blockchain_zid)\n  .then((tx) => {\n    console.log(tx)\n    // if(tx[0].gesamtbetrag==props.declarationData.invoice.total_value\n    //   && tx[0].zollwert== (props.declarationData.invoice.transport_costs + props.declarationData.invoice.total_value)\n    //   && tx[0].lieferkosten== props.declarationData.invoice.transport_costs\n    //   && tx[0].incoterms== props.declarationData.invoice.lieferbedingung\n    //   && tx[0].exporteur== props.declarationData.exporteur.publickey\n    //   && tx[0].importeur== props.declarationData.importeur.publickey\n    //   && tx[0].zoll== props.declarationData.customs_office.publickey\n    //   && tx[0].anmelder== props.declarationData.importeur.publickey\n    //   && tx[1].gesamtbetrag== props.declarationData.invoice.total_value\n    //   && tx[1].waehrung== props.declarationData.invoice.total_value\n    //   && tx[1].exporteur== props.declarationData.exporteur.publickey\n    //   && tx[1].importeur== props.declarationData.importeur.publickey\n    //   && tx[1].datum== props.declarationData.invoice.issue_date\n    //   && tx[1].rechnungsposten== crypto.createHash('sha512').update(props.declarationData.invoice.invoiceItems).digest('hex')\n    //   && tx[1].lieferkosten== props.declarationData.invoice.transport_costs\n    //   ){\n    //     return true;\n    // }\n    // else{return false;}\n  })\n  .catch((err) => {\n    console.log(err);\n  });\n}\n\n\nfunction ZollDocumentTransaction(props) {\n\n\n  const axiosInstance = useAxiosPrivate()\n\n  const [isVerified, setIsVerified] = useState(false);\n\n\n  useEffect(() => {\n    if (props.declarationData.status!=\"PE\") {\n      setIsVerified(true)\n    }\n  }, [])\n\n\n\n  function handleVerification() {\n    //axiosInstance.patch('declaration_auth/' + props.declarationData.id + '/', {'status': 'VF'})\n    //setIsVerified(true)\n    const abgleichBlockchain = abgleichBlockchain();\n    console.log(abgleichBlockchain)\n    if (abgleichBlockchain == true) {\n      //event Haken erscheint\n    }\n  }\n  function handleConfirmation() {\n    axiosInstance.patch('declaration_auth/' + props.declarationData.id + '/', {'status': 'AC'})\n  }\n\n  function handleReject() {\n    axiosInstance.patch('declaration_auth/' + props.declarationData.id + '/', {'status': 'RJ'})\n  }\n  \n  return (\n    <div>\n      <MDBCard>\n        <MDBCardBody>\n          <MDBContainer>\n            <MDBRow>\n              <MDBCol>\n                <MDBCardTitle>{props.declarationData.transaction.description}</MDBCardTitle>\n              </MDBCol>\n            </MDBRow>\n            <br />\n          </MDBContainer>\n          <MDBContainer>\n            <MDBRow>\n              <MDBCol>\n                <MDBCardText>\n                  <b>Versender</b>\n                  <br />\n                  {props.declarationData.exporteur.name}\n                  <br />\n                  {props.declarationData.exporteur.street}\n                  <br />\n                  {props.declarationData.exporteur.city_code} {props.declarationData.exporteur.city}, {props.declarationData.exporteur.country_code}\n                </MDBCardText>\n              </MDBCol>\n              <MDBCol>\n                <MDBCardText>\n                  <b>Empfänger / Anmelder</b>\n                  <br />\n                  {props.declarationData.importeur.name}\n                  <br />\n                  {props.declarationData.importeur.street}\n                  <br />\n                  {props.declarationData.importeur.city_code} {props.declarationData.importeur.city}, {props.declarationData.importeur.country_code}\n                </MDBCardText>\n              </MDBCol>\n              <MDBCol>\n                <b>Anzahl Dokumente: </b>\n                {props.numberDocuments}\n                <br />\n                <br />\n                <b>Verifikation: </b>Ausstehend (STATISCH)\n                <br />\n                <b>Zollbescheid: </b>Ausstehend (STATISCH)\n              </MDBCol>\n            </MDBRow>\n            <br />\n            <MDBRow>\n              <MDBCol md=\"8\" lg=\"9\">\n                <div className=\"alert alert-warning\" role=\"alert\">\n                  Status: {props.declarationData.status}\n                </div>\n              </MDBCol>\n              <MDBCol md=\"4\" lg=\"3\">\n                <div className=\"float-end\">\n                  {isVerified ? (\n                      <MDBBtn  className=\"my-3\">\n                      Daten sind verifiziert\n                    </MDBBtn> ) : (\n                  <MDBBtn onClick={() => handleVerification()} className=\"my-3\">\n                    Daten verifizieren\n                  </MDBBtn>\n                    )}\n                </div>\n              </MDBCol>\n            </MDBRow>\n            <MDBRow>\n              <MDBBtn\n                className=\"mx-3 mb-3\"\n                color=\"success\"\n                style={{ width: 300 }}\n                onClick={() => handleConfirmation()}\n                disabled\n              >\n                Anmeldung Bestätigen\n              </MDBBtn>\n              <MDBBtn\n                color=\"danger\"\n                className=\"mx-3 mb-3\"\n                style={{ width: 300 }}\n                disabled\n                onClick={() => handleReject()}\n              >\n                Anmeldung Ablehnen\n              </MDBBtn>\n            </MDBRow>\n          </MDBContainer>\n          <MDBCardFooter>\n            <MDBRow>\n              <MDBCol md=\"4\">Hinzugefügt: {props.declarationData.transaction.date_added}</MDBCol>\n              <MDBCol md=\"4\">\n                Zuletzt aktualisiert: {props.declarationData.transaction.date_processed}\n              </MDBCol>\n            </MDBRow>\n          </MDBCardFooter>\n        </MDBCardBody>\n      </MDBCard>\n    </div>\n  );\n}\n\nexport default ZollDocumentTransaction;\n"]},"metadata":{},"sourceType":"module"}