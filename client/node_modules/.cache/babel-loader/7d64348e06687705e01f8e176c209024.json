{"ast":null,"code":"var _jsxFileName = \"/Users/stephan/Dropbox/Entwicklung/webdev/projektstudium/client/src/components/ZollDocuments/ZollDocumentTransaction.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport { MDBBtn, MDBCard, MDBCardBody, MDBCardTitle, MDBCardFooter, MDBCardSubTitle, MDBCardText, MDBCol, MDBContainer, MDBRow, MDBPopover, MDBPopoverBody, MDBModal, MDBModalDialog, MDBModalContent, MDBModalHeader, MDBModalTitle, MDBModalBody, MDBModalFooter } from \"mdb-react-ui-kit\";\nimport { Link } from \"react-router-dom\";\nimport { getZollanmeldung } from \"../../Web3Client.js\";\nimport useAxiosPrivate from \"../../hooks/useAxiosPrivate.js\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction ZollDocumentTransaction(props) {\n  _s();\n\n  const axiosInstance = useAxiosPrivate();\n  useEffect(() => {\n    if (props.declarationData.status != \"verified\") {\n      props.setIsVerified(true);\n    }\n  }, []);\n\n  async function abgleichBlockchain(_blockchain_zid) {\n    var crypto = require(\"crypto\");\n\n    console.log(\"Zollanmeldung ID:\" + _blockchain_zid);\n    console.log(props.declarationData);\n    await getZollanmeldung(_blockchain_zid).then(tx => {\n      console.log(tx);\n      console.log(\"Gesamtbetrag Zollanmeldung: \" + tx[0].gesamtbetrag + \", \" + props.invoiceData.total_value);\n      console.log(\"Zollwert: \" + tx[0].zollwert + \", \" + (props.invoiceData.transport_costs + props.invoiceData.total_value));\n      console.log(\"Lieferbedingungen: \" + tx[0].incoterms + \", \" + props.declarationData.lieferbedingung);\n      console.log(\"Exporteur : \" + tx[0].exporteur + \", \" + props.declarationData.exporteur.publickey);\n      console.log(\"Importeur: \" + tx[0].importeur + \", \" + props.declarationData.importeur.publickey);\n      console.log(\"Zoll: \" + tx[0].zoll + \", \" + props.declarationData.customs_office.publickey);\n      console.log(\"Anmelder (Importeur): \" + tx[0].anmelder + \", \" + props.declarationData.importeur.publickey);\n      console.log(\"Gesamtbetrag Rechnung: \" + tx[1].gesamtbetrag + \", \" + props.invoiceData.total_value);\n      console.log(\"Währung: \" + tx[1].waehrung + \", \" + props.declarationData.invoice.currency);\n      console.log(\"Exporteur Rechnung: \" + tx[1].exporteur + \", \" + props.declarationData.exporteur.publickey);\n      console.log(\"Importeur Rechnung: \" + tx[1].importeur + \", \" + props.declarationData.importeur.publickey);\n      console.log(\"Rechnungsdatum: \" + tx[1].datum + \", \" + props.declarationData.invoice.issue_date);\n      console.log(\"Hash RPosten: \" + tx[1].rechnungsposten + \", \" + props.invoiceData.invoiceItem + \", \" + crypto.createHash(\"sha512\").update(props.invoiceData.invoiceItem).digest(\"hex\"));\n      console.log(\"Lieferkosten: \" + tx[1].lieferkosten + \", \" + props.declarationData.invoice.transport_costs);\n\n      if (tx[0].gesamtbetrag == props.invoiceData.total_value && tx[0].zollwert == props.invoiceData.transport_costs + props.invoiceData.total_value && tx[0].lieferkosten == props.declarationData.invoice.transport_costs && tx[0].incoterms == props.declarationData.lieferbedingung && tx[0].exporteur == props.declarationData.exporteur.publickey && tx[0].importeur == props.declarationData.importeur.publickey && tx[0].zoll == props.declarationData.customs_office.publickey && tx[0].anmelder == props.declarationData.importeur.publickey && tx[1].gesamtbetrag == props.invoiceData.total_value && tx[1].waehrung == props.declarationData.invoice.currency && tx[1].exporteur == props.declarationData.exporteur.publickey && tx[1].importeur == props.declarationData.importeur.publickey && tx[1].datum == props.declarationData.invoice.issue_date && tx[1].rechnungsposten == crypto.createHash(\"sha512\").update(props.invoiceData.invoiceItem).digest(\"hex\") && tx[1].lieferkosten == props.declarationData.invoice.transport_costs) {\n        console.log(\"Alles tutti\");\n        props.setIsVerified(true);\n        axiosInstance.patch(\"declaration_auth/\" + props.declarationData.id + \"/\", {\n          verified: true\n        });\n        props.handleCloseBackdrop();\n        props.setSnackbarSuccess(true);\n        props.setSnackbarMessage(\"Korrektheit der Daten wurde verifiziert.\");\n        return true;\n      } else {\n        console.log(\"Fehler liegt vor\");\n        props.handleCloseBackdrop();\n        props.setSnackbarSuccess(false);\n        props.setSnackbarMessage(\"Warnung: Daten stimmen nicht mit Blockchain überein.\");\n        return false;\n      }\n    }).catch(err => {\n      console.log(err);\n      props.handleCloseBackdrop();\n      props.setSnackbarSuccess(false);\n      props.setSnackbarMessage(\"Fehler bei Verifikation der Daten.\");\n      return false;\n    });\n  }\n\n  useEffect(() => {\n    //console.log(props.isVerified)\n    if (props.isVerified) {\n      props.setOpen(true); //console.log(\"Verifiziert\")\n      //hier würde Transaktion verifiziert werden\n    }\n  }, [props.isVerified]);\n\n  async function handleVerification() {\n    //setIsVerified(true)\n    props.handleToggleBackdrop();\n    abgleichBlockchain(props.declarationData.blockchain_zid).then(res => {\n      console.log(res);\n    });\n  }\n\n  function handleConfirmation() {\n    axiosInstance.patch(\"declaration_auth/\" + props.declarationData.id + \"/\", {\n      status_confirmation: \"angenommen\"\n    }).then(res => {\n      console.log(\"Zollanmeldung bestätigt\");\n      toggleShowConfirmModal();\n      props.setReload(!props.reload); // Snackbar\n\n      props.setSnackbarSuccess(true);\n      props.setSnackbarMessage(\"Zollanmeldung bestätigt.\");\n      props.handleOpenSnackbar();\n    }).catch(err => {\n      console.log(err);\n    });\n  }\n\n  function handleReject() {\n    axiosInstance.patch(\"declaration_auth/\" + props.declarationData.id + \"/\", {\n      status_confirmation: \"abgelehnt\"\n    }).then(res => {\n      console.log(\"Zollanmeldung abgelehnt\");\n      toggleShowRejectModal();\n      props.setReload(!props.reload); // Snackbar\n\n      props.setSnackbarSuccess(false);\n      props.setSnackbarMessage(\"Zollanmeldung abgelehnt.\");\n      props.handleOpenSnackbar();\n    }).catch(err => {\n      console.log(err);\n    });\n  } // Reject Modal State\n\n\n  const [rejectModal, setRejectModal] = useState(false);\n\n  function toggleShowRejectModal() {\n    setRejectModal(!rejectModal);\n  } // Confirm Modal State\n\n\n  const [confirmModal, setConfirmModal] = useState(false);\n\n  function toggleShowConfirmModal() {\n    setConfirmModal(!confirmModal);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(MDBCard, {\n      children: /*#__PURE__*/_jsxDEV(MDBCardBody, {\n        children: [/*#__PURE__*/_jsxDEV(MDBContainer, {\n          children: [/*#__PURE__*/_jsxDEV(MDBRow, {\n            children: /*#__PURE__*/_jsxDEV(MDBCol, {\n              children: /*#__PURE__*/_jsxDEV(MDBCardTitle, {\n                children: props.declarationData.transaction.description\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 262,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 261,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 260,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 267,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 259,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(MDBContainer, {\n          children: [/*#__PURE__*/_jsxDEV(MDBRow, {\n            children: [/*#__PURE__*/_jsxDEV(MDBCol, {\n              children: /*#__PURE__*/_jsxDEV(MDBCardText, {\n                children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                  children: \"Versender\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 273,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 274,\n                  columnNumber: 19\n                }, this), props.declarationData.exporteur.name, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 276,\n                  columnNumber: 19\n                }, this), props.declarationData.exporteur.street, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 278,\n                  columnNumber: 19\n                }, this), props.declarationData.exporteur.city_code, \" \", props.declarationData.exporteur.city, \",\", \" \", props.declarationData.exporteur.country_code]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 272,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 271,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(MDBCol, {\n              children: /*#__PURE__*/_jsxDEV(MDBCardText, {\n                children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                  children: \"Empf\\xE4nger / Anmelder\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 286,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 287,\n                  columnNumber: 19\n                }, this), props.declarationData.importeur.name, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 289,\n                  columnNumber: 19\n                }, this), props.declarationData.importeur.street, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 291,\n                  columnNumber: 19\n                }, this), props.declarationData.importeur.city_code, \" \", props.declarationData.importeur.city, \",\", \" \", props.declarationData.importeur.country_code]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 285,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 284,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(MDBCol, {\n              children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                children: \"Anzahl Dokumente: \"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 298,\n                columnNumber: 17\n              }, this), props.numberDocuments + 1, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 301,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 302,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"b\", {\n                children: \"Verifikation: \"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 303,\n                columnNumber: 17\n              }, this), props.declarationData.status_verificiation, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 305,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"b\", {\n                children: \"Zollbescheid: \"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 306,\n                columnNumber: 17\n              }, this), props.declarationData.status_confirmation]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 297,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 270,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 310,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(MDBRow, {\n            children: [/*#__PURE__*/_jsxDEV(MDBCol, {\n              md: \"8\",\n              lg: \"9\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"alert alert-warning\",\n                role: \"alert\",\n                children: [\"Status: \", props.declarationData.status]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 313,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 312,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(MDBCol, {\n              md: \"4\",\n              lg: \"3\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"float-end\",\n                children: /*#__PURE__*/_jsxDEV(MDBBtn, {\n                  onClick: () => handleVerification(),\n                  className: \"my-3\",\n                  children: \"Daten verifizieren\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 322,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 318,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 317,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 311,\n            columnNumber: 13\n          }, this), props.declarationData.status_confirmation == \"ausstehend\" && /*#__PURE__*/_jsxDEV(MDBRow, {\n            children: [/*#__PURE__*/_jsxDEV(MDBBtn, {\n              className: \"mx-3 mb-3\",\n              color: \"success\",\n              style: {\n                width: 300\n              },\n              onClick: toggleShowConfirmModal,\n              children: \"Anmeldung Best\\xE4tigen\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 331,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(MDBBtn, {\n              color: \"danger\",\n              className: \"mx-3 mb-3\",\n              style: {\n                width: 300\n              },\n              onClick: toggleShowRejectModal,\n              children: \"Anmeldung Ablehnen\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 339,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 330,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 269,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(MDBCardFooter, {\n          children: /*#__PURE__*/_jsxDEV(MDBRow, {\n            children: [/*#__PURE__*/_jsxDEV(MDBCol, {\n              md: \"4\",\n              children: [\"Hinzugef\\xFCgt: \", props.declarationData.transaction.date_added]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 352,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(MDBCol, {\n              md: \"4\",\n              children: [\"Zuletzt aktualisiert:\", \" \", props.declarationData.transaction.date_processed]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 355,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 351,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 350,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 258,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 257,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(MDBModal, {\n      show: rejectModal,\n      setShow: setRejectModal,\n      tabIndex: \"-1\",\n      children: /*#__PURE__*/_jsxDEV(MDBModalDialog, {\n        children: /*#__PURE__*/_jsxDEV(MDBModalContent, {\n          children: [/*#__PURE__*/_jsxDEV(MDBModalHeader, {\n            children: [/*#__PURE__*/_jsxDEV(MDBModalTitle, {\n              children: \"Anmeldung ablehnen\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 369,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(MDBBtn, {\n              className: \"btn-close\",\n              color: \"none\",\n              onClick: toggleShowRejectModal\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 370,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 368,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(MDBModalBody, {\n            children: [\"Wollen Sie die Zollanmeldung\", \" \", /*#__PURE__*/_jsxDEV(\"i\", {\n              children: props.declarationData.transaction.description\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 378,\n              columnNumber: 15\n            }, this), \" wirklich ablehnen? \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 379,\n              columnNumber: 25\n            }, this), \"Diese Auswahl l\\xE4sst sich nicht r\\xFCckg\\xE4ngig machen.\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 376,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(MDBModalFooter, {\n            children: [/*#__PURE__*/_jsxDEV(MDBBtn, {\n              color: \"danger\",\n              onClick: handleReject,\n              children: \"Ablehnen\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 384,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(MDBBtn, {\n              outline: true,\n              color: \"danger\",\n              onClick: toggleShowRejectModal,\n              children: \"Abbrechen\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 387,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 383,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 367,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 366,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 365,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(MDBModal, {\n      show: confirmModal,\n      setShow: setConfirmModal,\n      tabIndex: \"-1\",\n      children: /*#__PURE__*/_jsxDEV(MDBModalDialog, {\n        children: /*#__PURE__*/_jsxDEV(MDBModalContent, {\n          children: [/*#__PURE__*/_jsxDEV(MDBModalHeader, {\n            children: [/*#__PURE__*/_jsxDEV(MDBModalTitle, {\n              children: \"Anmeldung annehmen\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 400,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(MDBBtn, {\n              className: \"btn-close\",\n              color: \"none\",\n              onClick: toggleShowConfirmModal\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 401,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 399,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(MDBModalBody, {\n            children: [\"Wollen Sie die Zollanmeldung\", \" \", /*#__PURE__*/_jsxDEV(\"i\", {\n              children: props.declarationData.transaction.description\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 409,\n              columnNumber: 15\n            }, this), \" wirklich annehmen? \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 410,\n              columnNumber: 25\n            }, this), \"Diese Auswahl l\\xE4sst sich nicht r\\xFCckg\\xE4ngig machen.\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 407,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(MDBModalFooter, {\n            children: [/*#__PURE__*/_jsxDEV(MDBBtn, {\n              color: \"success\",\n              onClick: handleConfirmation,\n              children: \"Annehmen\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 415,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(MDBBtn, {\n              outline: true,\n              color: \"danger\",\n              onClick: toggleShowConfirmModal,\n              children: \"Abbrechen\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 418,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 414,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 398,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 397,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 396,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 256,\n    columnNumber: 5\n  }, this);\n}\n\n_s(ZollDocumentTransaction, \"z7inUDSDfB72DIrUGpqhUDlXmOE=\", false, function () {\n  return [useAxiosPrivate];\n});\n\n_c = ZollDocumentTransaction;\nexport default ZollDocumentTransaction;\n\nvar _c;\n\n$RefreshReg$(_c, \"ZollDocumentTransaction\");","map":{"version":3,"sources":["/Users/stephan/Dropbox/Entwicklung/webdev/projektstudium/client/src/components/ZollDocuments/ZollDocumentTransaction.jsx"],"names":["React","useEffect","useState","MDBBtn","MDBCard","MDBCardBody","MDBCardTitle","MDBCardFooter","MDBCardSubTitle","MDBCardText","MDBCol","MDBContainer","MDBRow","MDBPopover","MDBPopoverBody","MDBModal","MDBModalDialog","MDBModalContent","MDBModalHeader","MDBModalTitle","MDBModalBody","MDBModalFooter","Link","getZollanmeldung","useAxiosPrivate","axios","ZollDocumentTransaction","props","axiosInstance","declarationData","status","setIsVerified","abgleichBlockchain","_blockchain_zid","crypto","require","console","log","then","tx","gesamtbetrag","invoiceData","total_value","zollwert","transport_costs","incoterms","lieferbedingung","exporteur","publickey","importeur","zoll","customs_office","anmelder","waehrung","invoice","currency","datum","issue_date","rechnungsposten","invoiceItem","createHash","update","digest","lieferkosten","patch","id","verified","handleCloseBackdrop","setSnackbarSuccess","setSnackbarMessage","catch","err","isVerified","setOpen","handleVerification","handleToggleBackdrop","blockchain_zid","res","handleConfirmation","status_confirmation","toggleShowConfirmModal","setReload","reload","handleOpenSnackbar","handleReject","toggleShowRejectModal","rejectModal","setRejectModal","confirmModal","setConfirmModal","transaction","description","name","street","city_code","city","country_code","numberDocuments","status_verificiation","width","date_added","date_processed"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport {\n  MDBBtn,\n  MDBCard,\n  MDBCardBody,\n  MDBCardTitle,\n  MDBCardFooter,\n  MDBCardSubTitle,\n  MDBCardText,\n  MDBCol,\n  MDBContainer,\n  MDBRow,\n  MDBPopover,\n  MDBPopoverBody,\n  MDBModal,\n  MDBModalDialog,\n  MDBModalContent,\n  MDBModalHeader,\n  MDBModalTitle,\n  MDBModalBody,\n  MDBModalFooter,\n} from \"mdb-react-ui-kit\";\nimport { Link } from \"react-router-dom\";\nimport { getZollanmeldung } from \"../../Web3Client.js\";\nimport useAxiosPrivate from \"../../hooks/useAxiosPrivate.js\";\n\nimport axios from \"axios\";\n\nfunction ZollDocumentTransaction(props) {\n  const axiosInstance = useAxiosPrivate();\n\n  useEffect(() => {\n    if (props.declarationData.status != \"verified\") {\n      props.setIsVerified(true);\n    }\n  }, []);\n\n  async function abgleichBlockchain(_blockchain_zid) {\n    var crypto = require(\"crypto\");\n    console.log(\"Zollanmeldung ID:\" + _blockchain_zid);\n    console.log(props.declarationData);\n\n    await getZollanmeldung(_blockchain_zid)\n      .then((tx) => {\n        console.log(tx);\n        console.log(\n          \"Gesamtbetrag Zollanmeldung: \" +\n            tx[0].gesamtbetrag +\n            \", \" +\n            props.invoiceData.total_value\n        );\n        console.log(\n          \"Zollwert: \" +\n            tx[0].zollwert +\n            \", \" +\n            (props.invoiceData.transport_costs + props.invoiceData.total_value)\n        );\n        console.log(\n          \"Lieferbedingungen: \" +\n            tx[0].incoterms +\n            \", \" +\n            props.declarationData.lieferbedingung\n        );\n        console.log(\n          \"Exporteur : \" +\n            tx[0].exporteur +\n            \", \" +\n            props.declarationData.exporteur.publickey\n        );\n        console.log(\n          \"Importeur: \" +\n            tx[0].importeur +\n            \", \" +\n            props.declarationData.importeur.publickey\n        );\n        console.log(\n          \"Zoll: \" +\n            tx[0].zoll +\n            \", \" +\n            props.declarationData.customs_office.publickey\n        );\n        console.log(\n          \"Anmelder (Importeur): \" +\n            tx[0].anmelder +\n            \", \" +\n            props.declarationData.importeur.publickey\n        );\n        console.log(\n          \"Gesamtbetrag Rechnung: \" +\n            tx[1].gesamtbetrag +\n            \", \" +\n            props.invoiceData.total_value\n        );\n        console.log(\n          \"Währung: \" +\n            tx[1].waehrung +\n            \", \" +\n            props.declarationData.invoice.currency\n        );\n        console.log(\n          \"Exporteur Rechnung: \" +\n            tx[1].exporteur +\n            \", \" +\n            props.declarationData.exporteur.publickey\n        );\n        console.log(\n          \"Importeur Rechnung: \" +\n            tx[1].importeur +\n            \", \" +\n            props.declarationData.importeur.publickey\n        );\n        console.log(\n          \"Rechnungsdatum: \" +\n            tx[1].datum +\n            \", \" +\n            props.declarationData.invoice.issue_date\n        );\n        console.log(\n          \"Hash RPosten: \" +\n            tx[1].rechnungsposten +\n            \", \" +\n            props.invoiceData.invoiceItem +\n            \", \" +\n            crypto\n              .createHash(\"sha512\")\n              .update(props.invoiceData.invoiceItem)\n              .digest(\"hex\")\n        );\n        console.log(\n          \"Lieferkosten: \" +\n            tx[1].lieferkosten +\n            \", \" +\n            props.declarationData.invoice.transport_costs\n        );\n        if (\n          tx[0].gesamtbetrag == props.invoiceData.total_value &&\n          tx[0].zollwert ==\n            props.invoiceData.transport_costs + props.invoiceData.total_value &&\n          tx[0].lieferkosten == props.declarationData.invoice.transport_costs &&\n          tx[0].incoterms == props.declarationData.lieferbedingung &&\n          tx[0].exporteur == props.declarationData.exporteur.publickey &&\n          tx[0].importeur == props.declarationData.importeur.publickey &&\n          tx[0].zoll == props.declarationData.customs_office.publickey &&\n          tx[0].anmelder == props.declarationData.importeur.publickey &&\n          tx[1].gesamtbetrag == props.invoiceData.total_value &&\n          tx[1].waehrung == props.declarationData.invoice.currency &&\n          tx[1].exporteur == props.declarationData.exporteur.publickey &&\n          tx[1].importeur == props.declarationData.importeur.publickey &&\n          tx[1].datum == props.declarationData.invoice.issue_date &&\n          tx[1].rechnungsposten ==\n            crypto\n              .createHash(\"sha512\")\n              .update(props.invoiceData.invoiceItem)\n              .digest(\"hex\") &&\n          tx[1].lieferkosten == props.declarationData.invoice.transport_costs\n        ) {\n          console.log(\"Alles tutti\");\n          props.setIsVerified(true);\n          axiosInstance.patch(\n            \"declaration_auth/\" + props.declarationData.id + \"/\",\n            { verified: true }\n          );\n          props.handleCloseBackdrop();\n          props.setSnackbarSuccess(true);\n          props.setSnackbarMessage(\"Korrektheit der Daten wurde verifiziert.\");\n          return true;\n        } else {\n          console.log(\"Fehler liegt vor\");\n          props.handleCloseBackdrop();\n          props.setSnackbarSuccess(false);\n          props.setSnackbarMessage(\n            \"Warnung: Daten stimmen nicht mit Blockchain überein.\"\n          );\n          return false;\n        }\n      })\n      .catch((err) => {\n        console.log(err);\n        props.handleCloseBackdrop();\n        props.setSnackbarSuccess(false);\n        props.setSnackbarMessage(\"Fehler bei Verifikation der Daten.\");\n        return false;\n      });\n  }\n\n  useEffect(() => {\n    //console.log(props.isVerified)\n    if (props.isVerified) {\n      props.setOpen(true);\n      //console.log(\"Verifiziert\")\n      //hier würde Transaktion verifiziert werden\n    }\n  }, [props.isVerified]);\n\n  async function handleVerification() {\n    //setIsVerified(true)\n    props.handleToggleBackdrop();\n    abgleichBlockchain(props.declarationData.blockchain_zid).then((res) => {\n      console.log(res);\n    });\n  }\n\n  function handleConfirmation() {\n    axiosInstance\n      .patch(\"declaration_auth/\" + props.declarationData.id + \"/\", {\n        status_confirmation: \"angenommen\",\n      })\n      .then((res) => {\n        console.log(\"Zollanmeldung bestätigt\");\n        toggleShowConfirmModal();\n        props.setReload(!props.reload);\n        // Snackbar\n        props.setSnackbarSuccess(true);\n        props.setSnackbarMessage(\"Zollanmeldung bestätigt.\");\n        props.handleOpenSnackbar();\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }\n\n  function handleReject() {\n    axiosInstance\n      .patch(\"declaration_auth/\" + props.declarationData.id + \"/\", {\n        status_confirmation: \"abgelehnt\",\n      })\n      .then((res) => {\n        console.log(\"Zollanmeldung abgelehnt\");\n        toggleShowRejectModal();\n        props.setReload(!props.reload);\n        // Snackbar\n        props.setSnackbarSuccess(false);\n        props.setSnackbarMessage(\"Zollanmeldung abgelehnt.\");\n        props.handleOpenSnackbar();\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }\n\n  // Reject Modal State\n  const [rejectModal, setRejectModal] = useState(false);\n\n  function toggleShowRejectModal() {\n    setRejectModal(!rejectModal);\n  }\n\n  // Confirm Modal State\n  const [confirmModal, setConfirmModal] = useState(false);\n\n  function toggleShowConfirmModal() {\n    setConfirmModal(!confirmModal);\n  }\n\n  return (\n    <div>\n      <MDBCard>\n        <MDBCardBody>\n          <MDBContainer>\n            <MDBRow>\n              <MDBCol>\n                <MDBCardTitle>\n                  {props.declarationData.transaction.description}\n                </MDBCardTitle>\n              </MDBCol>\n            </MDBRow>\n            <br />\n          </MDBContainer>\n          <MDBContainer>\n            <MDBRow>\n              <MDBCol>\n                <MDBCardText>\n                  <b>Versender</b>\n                  <br />\n                  {props.declarationData.exporteur.name}\n                  <br />\n                  {props.declarationData.exporteur.street}\n                  <br />\n                  {props.declarationData.exporteur.city_code}{\" \"}\n                  {props.declarationData.exporteur.city},{\" \"}\n                  {props.declarationData.exporteur.country_code}\n                </MDBCardText>\n              </MDBCol>\n              <MDBCol>\n                <MDBCardText>\n                  <b>Empfänger / Anmelder</b>\n                  <br />\n                  {props.declarationData.importeur.name}\n                  <br />\n                  {props.declarationData.importeur.street}\n                  <br />\n                  {props.declarationData.importeur.city_code}{\" \"}\n                  {props.declarationData.importeur.city},{\" \"}\n                  {props.declarationData.importeur.country_code}\n                </MDBCardText>\n              </MDBCol>\n              <MDBCol>\n                <b>Anzahl Dokumente: </b>\n                {/* + 1 wegen Zollanmeldungs-Dokument */}\n                {props.numberDocuments + 1}\n                <br />\n                <br />\n                <b>Verifikation: </b>\n                {props.declarationData.status_verificiation}\n                <br />\n                <b>Zollbescheid: </b>\n                {props.declarationData.status_confirmation}\n              </MDBCol>\n            </MDBRow>\n            <br />\n            <MDBRow>\n              <MDBCol md=\"8\" lg=\"9\">\n                <div className=\"alert alert-warning\" role=\"alert\">\n                  Status: {props.declarationData.status}\n                </div>\n              </MDBCol>\n              <MDBCol md=\"4\" lg=\"3\">\n                <div className=\"float-end\">\n                  {/* {props.isVerified ? (\n                    <MDBBtn className=\"my-3\">Daten sind verifiziert</MDBBtn>\n                  ) : ( */}\n                  <MDBBtn onClick={() => handleVerification()} className=\"my-3\">\n                    Daten verifizieren\n                  </MDBBtn>\n                  {/* )} */}\n                </div>\n              </MDBCol>\n            </MDBRow>\n            {props.declarationData.status_confirmation == \"ausstehend\" && (\n              <MDBRow>\n                <MDBBtn\n                  className=\"mx-3 mb-3\"\n                  color=\"success\"\n                  style={{ width: 300 }}\n                  onClick={toggleShowConfirmModal}\n                >\n                  Anmeldung Bestätigen\n                </MDBBtn>\n                <MDBBtn\n                  color=\"danger\"\n                  className=\"mx-3 mb-3\"\n                  style={{ width: 300 }}\n                  onClick={toggleShowRejectModal}\n                >\n                  Anmeldung Ablehnen\n                </MDBBtn>\n              </MDBRow>\n            )}\n          </MDBContainer>\n          <MDBCardFooter>\n            <MDBRow>\n              <MDBCol md=\"4\">\n                Hinzugefügt: {props.declarationData.transaction.date_added}\n              </MDBCol>\n              <MDBCol md=\"4\">\n                Zuletzt aktualisiert:{\" \"}\n                {props.declarationData.transaction.date_processed}\n              </MDBCol>\n            </MDBRow>\n          </MDBCardFooter>\n        </MDBCardBody>\n      </MDBCard>\n\n      {/* Modal Anmeldung ablehnen */}\n      <MDBModal show={rejectModal} setShow={setRejectModal} tabIndex=\"-1\">\n        <MDBModalDialog>\n          <MDBModalContent>\n            <MDBModalHeader>\n              <MDBModalTitle>Anmeldung ablehnen</MDBModalTitle>\n              <MDBBtn\n                className=\"btn-close\"\n                color=\"none\"\n                onClick={toggleShowRejectModal}\n              ></MDBBtn>\n            </MDBModalHeader>\n            <MDBModalBody>\n              Wollen Sie die Zollanmeldung{\" \"}\n              <i>{props.declarationData.transaction.description}</i> wirklich\n              ablehnen? <br />\n              Diese Auswahl lässt sich nicht rückgängig machen.\n            </MDBModalBody>\n\n            <MDBModalFooter>\n              <MDBBtn color=\"danger\" onClick={handleReject}>\n                Ablehnen\n              </MDBBtn>\n              <MDBBtn outline color=\"danger\" onClick={toggleShowRejectModal}>\n                Abbrechen\n              </MDBBtn>\n            </MDBModalFooter>\n          </MDBModalContent>\n        </MDBModalDialog>\n      </MDBModal>\n\n      {/* Modal Anmeldung ablehnen */}\n      <MDBModal show={confirmModal} setShow={setConfirmModal} tabIndex=\"-1\">\n        <MDBModalDialog>\n          <MDBModalContent>\n            <MDBModalHeader>\n              <MDBModalTitle>Anmeldung annehmen</MDBModalTitle>\n              <MDBBtn\n                className=\"btn-close\"\n                color=\"none\"\n                onClick={toggleShowConfirmModal}\n              ></MDBBtn>\n            </MDBModalHeader>\n            <MDBModalBody>\n              Wollen Sie die Zollanmeldung{\" \"}\n              <i>{props.declarationData.transaction.description}</i> wirklich\n              annehmen? <br />\n              Diese Auswahl lässt sich nicht rückgängig machen.\n            </MDBModalBody>\n\n            <MDBModalFooter>\n              <MDBBtn color=\"success\" onClick={handleConfirmation}>\n                Annehmen\n              </MDBBtn>\n              <MDBBtn outline color=\"danger\" onClick={toggleShowConfirmModal}>\n                Abbrechen\n              </MDBBtn>\n            </MDBModalFooter>\n          </MDBModalContent>\n        </MDBModalDialog>\n      </MDBModal>\n    </div>\n  );\n}\n\nexport default ZollDocumentTransaction;\n"]},"metadata":{},"sourceType":"module"}