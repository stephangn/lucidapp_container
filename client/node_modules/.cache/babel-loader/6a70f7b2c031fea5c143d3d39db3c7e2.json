{"ast":null,"code":"import _slicedToArray from\"/Users/stephan/Dropbox/Entwicklung/webdev/projektstudium/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import{MDBContainer,MDBNavbar,MDBIcon,MDBDropdown,MDBDropdownToggle,MDBDropdownMenu,MDBDropdownItem,MDBDropdownLink,MDBDropdownDivider,MDBDropdownHeader}from\"mdb-react-ui-kit\";import{Link}from\"react-router-dom\";import useAuth from\"../../hooks/useAuth\";import useAxiosPrivate from\"../../hooks/useAxiosPrivate\";import{useNavigate}from\"react-router-dom\";import NotificationToast from\"../Dashboard/NotifcationToast\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function TopNavigation(){// Logout\nvar _useAuth=useAuth(),auth=_useAuth.auth;var username=auth.username;var company=auth.company;var navigate=useNavigate();var logout=function logout(){localStorage.removeItem(\"username\");localStorage.removeItem(\"company\");localStorage.removeItem(\"refresh_token\");localStorage.removeItem(\"access_token\");//alert(\"Sie werden ausgeloggt.\");\nnavigate(\"/login\",{replace:true});window.location.reload(false);};var _useState=useState([]),_useState2=_slicedToArray(_useState,2),alerts=_useState2[0],setAlerts=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),notificationsLoading=_useState4[0],setNotificationLoading=_useState4[1];var axiosInstance=useAxiosPrivate();// Suchen State\nvar _useState5=useState(),_useState6=_slicedToArray(_useState5,2),searchTerm=_useState6[0],setSearchTerm=_useState6[1];// Notifications DB Call\nuseEffect(function(){axiosInstance.get(\"/alerts?unread=true\").then(function(res){setAlerts(res.data);setNotificationLoading(false);});},[]);// Search Submit\nvar submitHandler=function submitHandler(e){e.preventDefault();navigate(\"/search?=\".concat(searchTerm),{replace:false});};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(MDBNavbar,{style:{marginLeft:64},fixed:\"top\",expand:\"lg\",light:true,bgColor:\"dark\",children:/*#__PURE__*/_jsxs(MDBContainer,{fluid:true,children:[/*#__PURE__*/_jsx(\"div\",{className:\"d-flex flex-row\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:submitHandler,className:\"d-flex input-group w-auto\",children:[/*#__PURE__*/_jsx(\"input\",{style:{width:300},type:\"search\",className:\"form-control\",placeholder:\"Suchbegriff eingeben\",\"aria-label\":\"Search\",onChange:function onChange(e){return setSearchTerm(e.target.value);}}),/*#__PURE__*/_jsx(Link,{to:\"/search?=\".concat(searchTerm),className:\"btn btn-primary\",children:\"Suchen\"})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex flex-row\",children:[/*#__PURE__*/_jsxs(MDBDropdown,{size:\"3\",className:\"mx-2\",children:[/*#__PURE__*/_jsx(MDBDropdownToggle,{outline:true,size:\"sm\",children:/*#__PURE__*/_jsx(MDBIcon,{size:\"2x\",className:\"ms-1\",far:true,icon:\"bell\"})}),/*#__PURE__*/_jsxs(MDBDropdownMenu,{className:\"p-3 text-muted overflow-scroll\",style:{width:\"400px\",minHeight:\"200px\",maxHeight:\"400px\"},children:[/*#__PURE__*/_jsx(MDBDropdownItem,{children:/*#__PURE__*/_jsx(MDBDropdownHeader,{className:\"mb-2\",children:\"Benachrichtigungen\"})}),/*#__PURE__*/_jsx(_Fragment,{children:alerts.length!==0&&!notificationsLoading?/*#__PURE__*/_jsx(_Fragment,{children:alerts.map(function(alert){return/*#__PURE__*/_jsx(MDBDropdownItem,{children:/*#__PURE__*/_jsx(NotificationToast,{alert:alert})},alert.id);})}):/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(MDBDropdownItem,{className:\"mt-5 d-flex justify-content-center\",children:/*#__PURE__*/_jsx(\"p\",{children:\"Keinen neuen Benachrichtungen\"})})})})]})]}),/*#__PURE__*/_jsxs(MDBDropdown,{children:[/*#__PURE__*/_jsx(MDBDropdownToggle,{outline:true,size:\"sm\",children:/*#__PURE__*/_jsx(MDBIcon,{size:\"2x\",className:\"ms-1\",far:true,icon:\"user-circle\"})}),/*#__PURE__*/_jsxs(MDBDropdownMenu,{className:\"text-muted\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"mt-3 mx-3\",children:[/*#__PURE__*/_jsx(\"b\",{children:\"Organisation: \"}),company]}),/*#__PURE__*/_jsxs(\"p\",{className:\"mt-3 ms-3\",children:[/*#__PURE__*/_jsx(\"b\",{children:\"Mitarbeiter: \"}),username]}),/*#__PURE__*/_jsxs(MDBDropdownItem,{children:[/*#__PURE__*/_jsx(MDBDropdownItem,{children:/*#__PURE__*/_jsx(MDBDropdownDivider,{})}),/*#__PURE__*/_jsxs(MDBDropdownLink,{onClick:logout,children:[/*#__PURE__*/_jsx(MDBIcon,{fas:true,icon:\"sign-out-alt\",size:\"lg\",className:\"me-2\"}),\"Logout\"]})]}),/*#__PURE__*/_jsx(MDBDropdownItem,{children:/*#__PURE__*/_jsxs(MDBDropdownLink,{onClick:function onClick(){navigate(\"/settings\");},children:[/*#__PURE__*/_jsx(MDBIcon,{fas:true,icon:\"cog\",size:\"lg\",className:\"me-2\"}),\"Account\"]})})]})]})]})]})}),/*#__PURE__*/_jsx(\"br\",{})]});}","map":{"version":3,"sources":["/Users/stephan/Dropbox/Entwicklung/webdev/projektstudium/client/src/components/UI/TopNavigation.jsx"],"names":["React","useEffect","useState","MDBContainer","MDBNavbar","MDBIcon","MDBDropdown","MDBDropdownToggle","MDBDropdownMenu","MDBDropdownItem","MDBDropdownLink","MDBDropdownDivider","MDBDropdownHeader","Link","useAuth","useAxiosPrivate","useNavigate","NotificationToast","TopNavigation","auth","username","company","navigate","logout","localStorage","removeItem","replace","window","location","reload","alerts","setAlerts","notificationsLoading","setNotificationLoading","axiosInstance","searchTerm","setSearchTerm","get","then","res","data","submitHandler","e","preventDefault","marginLeft","width","target","value","minHeight","maxHeight","length","map","alert","id"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport {\n  MDBContainer,\n  MDBNavbar,\n  MDBIcon,\n  MDBDropdown,\n  MDBDropdownToggle,\n  MDBDropdownMenu,\n  MDBDropdownItem,\n  MDBDropdownLink,\n  MDBDropdownDivider,\n  MDBDropdownHeader,\n} from \"mdb-react-ui-kit\";\n\nimport { Link } from \"react-router-dom\";\n\nimport useAuth from \"../../hooks/useAuth\";\nimport useAxiosPrivate from \"../../hooks/useAxiosPrivate\";\nimport { useNavigate } from \"react-router-dom\";\nimport NotificationToast from \"../Dashboard/NotifcationToast\";\n\nexport default function TopNavigation() {\n  // Logout\n  const { auth } = useAuth();\n  const username = auth.username;\n  const company = auth.company;\n  const navigate = useNavigate();\n\n  const logout = () => {\n    localStorage.removeItem(\"username\");\n    localStorage.removeItem(\"company\");\n    localStorage.removeItem(\"refresh_token\");\n    localStorage.removeItem(\"access_token\");\n    //alert(\"Sie werden ausgeloggt.\");\n    navigate(\"/login\", { replace: true });\n    window.location.reload(false);\n  };\n\n  const [alerts, setAlerts] = useState([]);\n  const [notificationsLoading, setNotificationLoading] = useState(true);\n\n  const axiosInstance = useAxiosPrivate();\n\n  // Suchen State\n  const [searchTerm, setSearchTerm] = useState();\n\n  // Notifications DB Call\n  useEffect(() => {\n    axiosInstance.get(\"/alerts?unread=true\").then((res) => {\n      setAlerts(res.data);\n      setNotificationLoading(false);\n    });\n  }, []);\n\n  // Search Submit\n  const submitHandler = (e) => {\n    e.preventDefault();\n    navigate(`/search?=${searchTerm}`, { replace: false });\n  };\n\n  return (\n    <>\n      <MDBNavbar\n        style={{ marginLeft: 64 }}\n        fixed=\"top\"\n        expand=\"lg\"\n        light\n        bgColor=\"dark\"\n      >\n        <MDBContainer fluid>\n          <div className=\"d-flex flex-row\">\n            <form\n              onSubmit={submitHandler}\n              className=\"d-flex input-group w-auto\"\n            >\n              <input\n                style={{ width: 300 }}\n                type=\"search\"\n                className=\"form-control\"\n                placeholder=\"Suchbegriff eingeben\"\n                aria-label=\"Search\"\n                onChange={(e) => setSearchTerm(e.target.value)}\n              />\n              <Link to={`/search?=${searchTerm}`} className=\"btn btn-primary\">\n                Suchen\n              </Link>\n            </form>\n          </div>\n          <div className=\"d-flex flex-row\">\n            <MDBDropdown size=\"3\" className=\"mx-2\">\n              {/* Anzahl Benachrichtungen */}\n              <MDBDropdownToggle outline size=\"sm\">\n                <MDBIcon size=\"2x\" className=\"ms-1\" far icon=\"bell\" />\n              </MDBDropdownToggle>\n              <MDBDropdownMenu\n                className=\"p-3 text-muted overflow-scroll\"\n                style={{\n                  width: \"400px\",\n                  minHeight: \"200px\",\n                  maxHeight: \"400px\",\n                }}\n              >\n                <MDBDropdownItem>\n                  <MDBDropdownHeader className=\"mb-2\">\n                    Benachrichtigungen\n                  </MDBDropdownHeader>\n                </MDBDropdownItem>\n                <>\n                  {alerts.length !== 0 && !notificationsLoading ? (\n                    <>\n                      {alerts.map((alert) => (\n                        <MDBDropdownItem key={alert.id}>\n                          <NotificationToast alert={alert} />\n                        </MDBDropdownItem>\n                      ))}\n                    </>\n                  ) : (\n                    <>\n                      <MDBDropdownItem className=\"mt-5 d-flex justify-content-center\">\n                        <p>Keinen neuen Benachrichtungen</p>\n                      </MDBDropdownItem>\n                    </>\n                  )}\n                </>\n              </MDBDropdownMenu>\n            </MDBDropdown>\n            <MDBDropdown>\n              <MDBDropdownToggle outline size=\"sm\">\n                <MDBIcon size=\"2x\" className=\"ms-1\" far icon=\"user-circle\" />\n              </MDBDropdownToggle>\n              <MDBDropdownMenu className=\"text-muted\">\n                <p className=\"mt-3 mx-3\">\n                  <b>Organisation: </b>\n                  {company}\n                </p>\n                <p className=\"mt-3 ms-3\">\n                  <b>Mitarbeiter: </b>\n                  {username}\n                </p>\n                <MDBDropdownItem>\n                  <MDBDropdownItem>\n                    <MDBDropdownDivider />\n                  </MDBDropdownItem>\n                  <MDBDropdownLink onClick={logout}>\n                    <MDBIcon\n                      fas\n                      icon=\"sign-out-alt\"\n                      size=\"lg\"\n                      className=\"me-2\"\n                    />\n                    Logout\n                  </MDBDropdownLink>\n                </MDBDropdownItem>\n                <MDBDropdownItem>\n                  <MDBDropdownLink\n                    onClick={() => {\n                      navigate(\"/settings\");\n                    }}\n                  >\n                    <MDBIcon fas icon=\"cog\" size=\"lg\" className=\"me-2\" />\n                    Account\n                  </MDBDropdownLink>\n                </MDBDropdownItem>\n              </MDBDropdownMenu>\n            </MDBDropdown>\n          </div>\n        </MDBContainer>\n      </MDBNavbar>\n      <br />\n    </>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}